<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wedding Guest Book - Buku Tamu Digital</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%);
            color: #1e293b;
            min-height: 100vh;
        }
        
        .font-playfair { font-family: 'Playfair Display', serif; }
        
        /* Premium Gradients */
        .bg-gradient-wedding {
            background: linear-gradient(135deg, #ffffff 0%, #f1f5f9 50%, #e2e8f0 100%);
            position: relative;
        }
        
        .bg-gradient-wedding::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(59,130,246,0.1) 0%, rgba(139,92,246,0.05) 50%, rgba(236,72,153,0.1) 100%);
            pointer-events: none;
        }
        
        .bg-gradient-gold {
            background: linear-gradient(135deg, #ffd700 0%, #ffb347 50%, #ff6b35 100%);
            box-shadow: 0 8px 32px rgba(255, 215, 0, 0.3);
        }
        
        .bg-gradient-premium {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
        }
        
        /* Glass Morphism Effects */
        .glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .glass-dark {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(226, 232, 240, 0.5);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
        }
        
        /* Premium Cards */
        .premium-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.95) 0%, rgba(248,250,252,0.9) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(226,232,240,0.5);
            box-shadow: 
                0 8px 32px rgba(0,0,0,0.1),
                inset 0 1px 0 rgba(255,255,255,0.8);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .premium-card:hover {
            transform: translateY(-8px);
            box-shadow: 
                0 20px 40px rgba(0,0,0,0.15),
                inset 0 1px 0 rgba(255,255,255,1);
        }
        
        /* Luxury Buttons */
        .btn-luxury {
            background: linear-gradient(135deg, #ffd700 0%, #ffb347 100%);
            border: none;
            color: #1a1a2e;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .btn-luxury::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }
        
        .btn-luxury:hover::before {
            left: 100%;
        }
        
        .btn-luxury:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 215, 0, 0.4);
        }
        
        .btn-premium {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn-premium::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn-premium:hover::before {
            left: 100%;
        }
        
        .btn-premium:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        /* Sidebar Styles */
        .sidebar-hidden { transform: translateX(-100%); }
        .sidebar-visible { transform: translateX(0); }
        .transition-transform { transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        
        .sidebar {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(226, 232, 240, 0.5);
        }
        
        /* Modal Styles */
        .modal { 
            display: none;
            backdrop-filter: blur(10px);
        }
        .modal.active { display: flex; }
        
        .modal-content {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(226, 232, 240, 0.5);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
        }
        
        /* Animations */
        .animate-fade-in { 
            animation: fadeIn 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes fadeIn { 
            from { 
                opacity: 0; 
                transform: translateY(20px);
            } 
            to { 
                opacity: 1;
                transform: translateY(0);
            } 
        }
        
        .animate-slide-up {
            animation: slideUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Premium Hero Background */
        .bg-wedding-photo {
            background: linear-gradient(135deg, #ffffff 0%, #f1f5f9 30%, #e2e8f0 70%, #cbd5e1 100%);
            position: relative;
            overflow: hidden;
        }
        
        .bg-wedding-photo::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(236, 72, 153, 0.1) 0%, transparent 50%);
        }
        
        .bg-wedding-photo::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.03"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.03"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.02"/><circle cx="10" cy="90" r="0.5" fill="white" opacity="0.02"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.5;
        }
        
        /* Input Styles */
        .input-premium {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(226, 232, 240, 0.8);
            color: #1e293b;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .input-premium:focus {
            background: rgba(255, 255, 255, 1);
            border-color: #3b82f6;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
            outline: none;
        }
        
        .input-premium::placeholder {
            color: rgba(100, 116, 139, 0.7);
        }
        
        /* Table Styles */
        .table-premium {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(226, 232, 240, 0.5);
        }
        
        .table-premium th {
            background: rgba(248, 250, 252, 0.9);
            border-bottom: 1px solid rgba(226, 232, 240, 0.5);
            color: #3b82f6;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .table-premium td {
            border-bottom: 1px solid rgba(226, 232, 240, 0.3);
            color: rgba(30, 41, 59, 0.9);
        }
        
        .table-premium tr:hover {
            background: rgba(248, 250, 252, 0.7);
        }
        
        /* Status Badges */
        .badge-premium {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2) 0%, rgba(255, 215, 0, 0.1) 100%);
            border: 1px solid rgba(255, 215, 0, 0.3);
            color: #ffd700;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #ffd700 0%, #ffb347 100%);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #ffb347 0%, #ffd700 100%);
        }
        
        /* Navigation Hover Effects */
        .nav-item {
            transition: all 0.3s ease;
            position: relative;
            color: #64748b;
        }
        
        .nav-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }
        
        .nav-item:hover::before {
            transform: scaleY(1);
        }
        
        .nav-item:hover {
            background: rgba(59, 130, 246, 0.1);
            transform: translateX(5px);
            color: #1e293b;
        }
        
        /* Check-in Tab Styles */
        .checkin-tab {
            background: rgba(255, 255, 255, 0.8);
            color: rgba(100, 116, 139, 0.9);
            border: 1px solid rgba(226, 232, 240, 0.5);
            position: relative;
            overflow: hidden;
        }
        
        .checkin-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(59,130,246,0.1), transparent);
            transition: left 0.5s;
        }
        
        .checkin-tab:hover::before {
            left: 100%;
        }
        
        .checkin-tab:hover {
            background: rgba(255, 255, 255, 0.95);
            color: rgba(30, 41, 59, 0.9);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .checkin-tab.active {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: #ffffff;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
            transform: translateY(-2px);
        }
        
        .checkin-tab.active:hover {
            background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
            color: #ffffff;
        }
        
        .checkin-tab-content {
            animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Floating Elements */
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        /* Glow Effects */
        .glow {
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }
        
        .glow-purple {
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.3);
        }
        
        /* Text Gradients */
        .text-gradient {
            background: linear-gradient(135deg, #ffd700 0%, #ffb347 50%, #ff6b35 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .text-gradient-purple {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body>
    <!-- Login Section -->
    <div id="loginSection" class="min-h-screen bg-gradient-wedding flex items-center justify-center p-4 relative overflow-hidden">
        <!-- Floating Elements -->
        <div class="absolute top-20 left-10 w-20 h-20 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full opacity-20 floating"></div>
        <div class="absolute bottom-20 right-10 w-32 h-32 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-20 floating" style="animation-delay: -1s;"></div>
        <div class="absolute top-1/2 right-1/4 w-16 h-16 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-full opacity-20 floating" style="animation-delay: -2s;"></div>
        
        <div class="glass-dark rounded-3xl shadow-2xl p-10 w-full max-w-md animate-fade-in relative z-10">
            <div class="text-center mb-10">
                <div class="mb-6">
                    <div class="w-20 h-20 mx-auto bg-gradient-gold rounded-2xl flex items-center justify-center mb-4 glow">
                        <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                        </svg>
                    </div>
                </div>
                <h1 class="font-playfair text-4xl font-bold text-gradient mb-3">Wedding Guest Book</h1>
                <p class="text-slate-600 text-lg">Sistem Buku Tamu Digital Premium</p>
                <div class="w-24 h-1 bg-gradient-gold mx-auto mt-4 rounded-full"></div>
            </div>
            
            <div class="space-y-5">
                <button onclick="showOperatorLogin()" class="w-full btn-luxury py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-300 transform hover:scale-105">
                    <span class="flex items-center justify-center space-x-3">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        <span>Login Operator</span>
                    </span>
                </button>
                <button onclick="showAdminLogin()" class="w-full btn-premium py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-300 transform hover:scale-105">
                    <span class="flex items-center justify-center space-x-3">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                        </svg>
                        <span>Login Admin</span>
                    </span>
                </button>
            </div>
            
            <div class="mt-8 text-center">
                <p class="text-slate-500 text-sm">Powered by Premium Wedding Technology</p>
            </div>
        </div>
    </div>

    <!-- Operator Login Modal -->
    <div id="operatorModal" class="modal fixed inset-0 bg-black/70 items-center justify-center z-50">
        <div class="modal-content rounded-3xl p-8 w-full max-w-md mx-4 animate-slide-up">
            <div class="text-center mb-8">
                <div class="w-16 h-16 mx-auto bg-gradient-gold rounded-2xl flex items-center justify-center mb-4 glow">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                </div>
                <h2 class="font-playfair text-3xl font-bold text-gradient mb-2">Login Operator</h2>
                <p class="text-slate-600">Akses sistem buku tamu digital</p>
            </div>
            
            <form onsubmit="operatorLogin(event)" class="space-y-6">
                <div>
                    <label for="operatorClientId" class="block text-sm font-medium text-slate-700 mb-3">ID Client</label>
                    <input type="text" id="operatorClientId" placeholder="Masukkan ID Client" class="w-full px-4 py-4 input-premium rounded-xl" required>
                </div>
                <div>
                    <label for="operatorName" class="block text-sm font-medium text-slate-700 mb-3">Nama Operator</label>
                    <input type="text" id="operatorName" placeholder="Masukkan nama Anda" class="w-full px-4 py-4 input-premium rounded-xl" required>
                </div>
                <div>
                    <label for="operatorPassword" class="block text-sm font-medium text-slate-700 mb-3">Password</label>
                    <input type="password" id="operatorPassword" placeholder="Password client" class="w-full px-4 py-4 input-premium rounded-xl" required>
                </div>
                <div class="flex space-x-4 pt-4">
                    <button type="submit" class="flex-1 btn-luxury py-4 rounded-xl font-semibold">Masuk</button>
                    <button type="button" onclick="closeModal('operatorModal')" class="flex-1 glass py-4 rounded-xl font-semibold text-slate-600 hover:text-slate-800 transition-colors">Batal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="adminModal" class="modal fixed inset-0 bg-black/70 items-center justify-center z-50">
        <div class="modal-content rounded-3xl p-8 w-full max-w-md mx-4 animate-slide-up">
            <div class="text-center mb-8">
                <div class="w-16 h-16 mx-auto bg-gradient-premium rounded-2xl flex items-center justify-center mb-4 glow-purple">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                    </svg>
                </div>
                <h2 class="font-playfair text-3xl font-bold text-gradient-purple mb-2">Login Admin</h2>
                <p class="text-slate-600">Panel administrasi sistem</p>
            </div>
            
            <form onsubmit="adminLogin(event)" class="space-y-6">
                <div>
                    <label for="adminUsername" class="block text-sm font-medium text-slate-700 mb-3">Username</label>
                    <input type="text" id="adminUsername" placeholder="Username admin" class="w-full px-4 py-4 input-premium rounded-xl" required>
                </div>
                <div>
                    <label for="adminPassword" class="block text-sm font-medium text-slate-700 mb-3">Password</label>
                    <input type="password" id="adminPassword" placeholder="Password admin" class="w-full px-4 py-4 input-premium rounded-xl" required>
                </div>
                <div class="flex space-x-4 pt-4">
                    <button type="submit" class="flex-1 btn-premium py-4 rounded-xl font-semibold">Masuk</button>
                    <button type="button" onclick="closeModal('adminModal')" class="flex-1 glass py-4 rounded-xl font-semibold text-slate-600 hover:text-slate-800 transition-colors">Batal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="hidden min-h-screen">
        <!-- Sidebar -->
        <div id="sidebar" class="sidebar fixed left-0 top-0 h-full w-64 shadow-2xl transition-transform z-40 flex flex-col">
            <div class="p-6 border-b border-white/10">
                <div class="flex items-center space-x-3 mb-4">
                    <div class="w-10 h-10 bg-gradient-gold rounded-xl flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                        </svg>
                    </div>
                    <div>
                        <h2 class="font-playfair text-xl font-bold text-slate-800">Dashboard</h2>
                        <p class="text-sm text-slate-600" id="userRole">Operator</p>
                    </div>
                </div>
            </div>
            <nav class="flex-1 p-4 overflow-y-auto">
                <ul class="space-y-2">
                    <li><button onclick="showSection('home')" class="nav-item w-full text-left px-4 py-3 rounded-xl transition-colors">
                        <span class="flex items-center space-x-3">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                            </svg>
                            <span>Home</span>
                        </span>
                    </button></li>
                    <li><button onclick="showSection('checkin')" class="nav-item w-full text-left px-4 py-3 rounded-xl transition-colors">
                        <span class="flex items-center space-x-3">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span>Check-in</span>
                        </span>
                    </button></li>
                    <li><button onclick="showSection('messages')" class="nav-item w-full text-left px-4 py-3 rounded-xl transition-colors">
                        <span class="flex items-center space-x-3">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                            </svg>
                            <span>Ucapan</span>
                        </span>
                    </button></li>
                    <li><button onclick="showSection('analytics')" class="nav-item w-full text-left px-4 py-3 rounded-xl transition-colors">
                        <span class="flex items-center space-x-3">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                            </svg>
                            <span>Grafik</span>
                        </span>
                    </button></li>
                    <li><button onclick="showSection('database')" class="nav-item w-full text-left px-4 py-3 rounded-xl transition-colors">
                        <span class="flex items-center space-x-3">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path>
                            </svg>
                            <span>Database</span>
                        </span>
                    </button></li>
                    <li id="websiteManagementNav" class="hidden"><button onclick="showSection('websites')" class="nav-item w-full text-left px-4 py-3 rounded-xl transition-colors">
                        <span class="flex items-center space-x-3">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path>
                            </svg>
                            <span>Kelola Website</span>
                        </span>
                    </button></li>
                    <li><button onclick="showSection('settings')" class="nav-item w-full text-left px-4 py-3 rounded-xl transition-colors">
                        <span class="flex items-center space-x-3">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            <span>Pengaturan</span>
                        </span>
                    </button></li>
                    <li><button onclick="showSection('about')" class="nav-item w-full text-left px-4 py-3 rounded-xl transition-colors">
                        <span class="flex items-center space-x-3">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span>About Us</span>
                        </span>
                    </button></li>
                </ul>
            </nav>
            <div class="absolute bottom-4 left-4 right-4">
                <button onclick="logout()" class="w-full glass-dark py-3 rounded-xl text-slate-700 hover:text-slate-900 transition-colors font-medium">
                    <span class="flex items-center justify-center space-x-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                        </svg>
                        <span>Logout</span>
                    </span>
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="ml-64 transition-all duration-300" id="mainContent">
            <!-- Header -->
            <header class="glass-dark shadow-2xl p-6 flex items-center justify-between border-b border-slate-200">
                <button onclick="toggleSidebar()" class="p-3 rounded-xl glass hover:bg-slate-100 transition-colors">
                    <svg class="w-6 h-6 text-slate-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
                <div class="text-right">
                    <p class="font-semibold text-slate-800 text-lg" id="currentUser">Operator</p>
                    <p class="text-sm text-slate-600" id="currentDateTime"></p>
                </div>
            </header>

            <!-- Home Section -->
            <div id="homeSection" class="section p-8">
                <div class="bg-wedding-photo rounded-3xl h-96 flex items-center justify-center text-slate-800 relative overflow-hidden mb-8 shadow-2xl">
                    <div class="text-center z-10 relative">
                        <div class="mb-6">
                            <div class="w-24 h-24 mx-auto bg-gradient-gold rounded-full flex items-center justify-center mb-6 glow floating">
                                <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                </svg>
                            </div>
                        </div>
                        <h1 class="font-playfair text-6xl font-bold mb-4 text-gradient" id="brideName">Sarah & Ahmad</h1>
                        <p class="text-2xl opacity-90 mb-2">Selamat Datang di Pernikahan Kami</p>
                        <p class="text-xl opacity-80" id="weddingDate">12 Desember 2024</p>
                        <div class="w-32 h-1 bg-gradient-gold mx-auto mt-6 rounded-full"></div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                    <div class="premium-card rounded-2xl p-8 shadow-2xl">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-slate-600 text-sm font-medium uppercase tracking-wider">Total Undangan</p>
                                <p class="text-3xl font-bold text-gradient mt-2" id="totalInvitations">150</p>
                            </div>
                            <div class="bg-gradient-to-r from-blue-500 to-purple-600 p-4 rounded-2xl glow-purple">
                                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="premium-card rounded-2xl p-8 shadow-2xl">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-slate-600 text-sm font-medium uppercase tracking-wider">Sudah Check-in</p>
                                <p class="text-3xl font-bold text-green-600 mt-2" id="totalCheckin">0</p>
                            </div>
                            <div class="bg-gradient-to-r from-green-500 to-emerald-600 p-4 rounded-2xl glow">
                                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="premium-card rounded-2xl p-8 shadow-2xl">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-slate-600 text-sm font-medium uppercase tracking-wider">Waktu</p>
                                <p class="text-3xl font-bold text-purple-600 mt-2" id="currentTime">00:00</p>
                            </div>
                            <div class="bg-gradient-to-r from-purple-500 to-pink-600 p-4 rounded-2xl glow-purple">
                                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="premium-card rounded-2xl p-8 shadow-2xl">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-slate-600 text-sm font-medium uppercase tracking-wider">Ucapan</p>
                                <p class="text-3xl font-bold text-orange-600 mt-2" id="totalMessages">0</p>
                            </div>
                            <div class="bg-gradient-to-r from-orange-500 to-red-600 p-4 rounded-2xl glow">
                                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Check-in Section -->
            <div id="checkinSection" class="section hidden p-6">
                <h2 class="font-playfair text-3xl font-bold mb-8 text-gradient">Check-in Tamu</h2>
                
                <!-- Check-in Navigation Tabs -->
                <div class="mb-8">
                    <div class="flex space-x-1 bg-white/5 p-1 rounded-2xl backdrop-filter backdrop-blur-lg border border-white/10">
                        <button onclick="showCheckinTab('scanner')" id="scannerTab" class="checkin-tab active flex-1 py-4 px-6 rounded-xl font-semibold transition-all duration-300">
                            <span class="flex items-center justify-center space-x-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path>
                                </svg>
                                <span>QR Scanner</span>
                            </span>
                        </button>
                        <button onclick="showCheckinTab('qrcode')" id="qrcodeTab" class="checkin-tab flex-1 py-4 px-6 rounded-xl font-semibold transition-all duration-300">
                            <span class="flex items-center justify-center space-x-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                <span>Generate QR</span>
                            </span>
                        </button>
                        <button onclick="showCheckinTab('manual')" id="manualTab" class="checkin-tab flex-1 py-4 px-6 rounded-xl font-semibold transition-all duration-300">
                            <span class="flex items-center justify-center space-x-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                                <span>Manual Input</span>
                            </span>
                        </button>
                        <button onclick="showCheckinTab('bulk')" id="bulkTab" class="checkin-tab flex-1 py-4 px-6 rounded-xl font-semibold transition-all duration-300">
                            <span class="flex items-center justify-center space-x-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                </svg>
                                <span>Bulk Check-in</span>
                            </span>
                        </button>
                    </div>
                </div>
                
                <!-- Check-in Content Tabs -->
                <div class="checkin-content">
                    <!-- QR Scanner Tab -->
                    <div id="scannerContent" class="checkin-tab-content">
                        <div class="premium-card rounded-3xl p-8 shadow-2xl max-w-2xl mx-auto">
                            <div class="text-center mb-8">
                                <div class="w-20 h-20 mx-auto bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mb-4 glow-purple">
                                    <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path>
                                    </svg>
                                </div>
                                <h3 class="text-2xl font-bold text-gradient-purple mb-2">QR Code Scanner</h3>
                                <p class="text-slate-600">Scan QR code dari undangan tamu</p>
                            </div>
                            
                            <div id="qr-reader" class="mb-6 rounded-2xl overflow-hidden"></div>
                            
                            <button onclick="startQRScanner()" class="w-full btn-premium py-4 rounded-xl font-semibold text-lg">
                                <span class="flex items-center justify-center space-x-3">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                                    </svg>
                                    <span>Mulai Scan QR</span>
                                </span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- QR Code Generator Tab -->
                    <div id="qrcodeContent" class="checkin-tab-content hidden">
                        <div class="premium-card rounded-3xl p-8 shadow-2xl max-w-2xl mx-auto">
                            <div class="text-center mb-8">
                                <div class="w-20 h-20 mx-auto bg-gradient-gold rounded-2xl flex items-center justify-center mb-4 glow">
                                    <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                    </svg>
                                </div>
                                <h3 class="text-2xl font-bold text-gradient mb-2">Generate QR Code</h3>
                                <p class="text-white/70">QR code untuk check-in mandiri tamu</p>
                            </div>
                            
                            <div id="qrCodeDisplay" class="flex justify-center mb-6">
                                <div class="glass-dark p-6 rounded-2xl">
                                    <canvas id="qrCanvas" class="rounded-xl"></canvas>
                                </div>
                            </div>
                            
                            <div class="space-y-4">
                                <button onclick="generateQR()" class="w-full btn-luxury py-4 rounded-xl font-semibold text-lg">
                                    <span class="flex items-center justify-center space-x-3">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                        </svg>
                                        <span>Generate QR Code Baru</span>
                                    </span>
                                </button>
                                
                                <button onclick="printQR()" class="w-full glass py-4 rounded-xl font-semibold text-white/90 hover:text-white transition-colors">
                                    <span class="flex items-center justify-center space-x-3">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
                                        </svg>
                                        <span>Print QR Code</span>
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Manual Check-in Tab -->
                    <div id="manualContent" class="checkin-tab-content hidden">
                        <div class="premium-card rounded-3xl p-8 shadow-2xl max-w-2xl mx-auto">
                            <div class="text-center mb-8">
                                <div class="w-20 h-20 mx-auto bg-gradient-to-r from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center mb-4 glow-purple">
                                    <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                    </svg>
                                </div>
                                <h3 class="text-2xl font-bold text-gradient-purple mb-2">Check-in Manual</h3>
                                <p class="text-white/70">Input data tamu secara manual</p>
                            </div>
                            
                            <form onsubmit="manualCheckin(event)" class="space-y-6">
                                <div>
                                    <label for="guestName" class="block text-sm font-medium text-white/90 mb-3">Nama Tamu</label>
                                    <input type="text" id="guestName" placeholder="Masukkan nama lengkap tamu" class="w-full px-4 py-4 input-premium rounded-xl" required>
                                </div>
                                <div>
                                    <label for="guestCount" class="block text-sm font-medium text-white/90 mb-3">Jumlah Hadir</label>
                                    <input type="number" id="guestCount" min="1" value="1" class="w-full px-4 py-4 input-premium rounded-xl" required>
                                </div>
                                <div>
                                    <label for="guestMessage" class="block text-sm font-medium text-white/90 mb-3">Ucapan & Doa (Opsional)</label>
                                    <textarea id="guestMessage" rows="4" placeholder="Tuliskan ucapan dan doa untuk mempelai..." class="w-full px-4 py-4 input-premium rounded-xl resize-none"></textarea>
                                </div>
                                <button type="submit" class="w-full btn-luxury py-4 rounded-xl font-semibold text-lg">
                                    <span class="flex items-center justify-center space-x-3">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                        </svg>
                                        <span>Check-in Tamu</span>
                                    </span>
                                </button>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Bulk Check-in Tab -->
                    <div id="bulkContent" class="checkin-tab-content hidden">
                        <div class="premium-card rounded-3xl p-8 shadow-2xl max-w-4xl mx-auto">
                            <div class="text-center mb-8">
                                <div class="w-20 h-20 mx-auto bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center mb-4 glow">
                                    <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                    </svg>
                                </div>
                                <h3 class="text-2xl font-bold text-gradient mb-2">Bulk Check-in</h3>
                                <p class="text-white/70">Check-in multiple tamu sekaligus</p>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <!-- CSV Upload -->
                                <div class="space-y-6">
                                    <h4 class="text-lg font-semibold text-white/90">Upload File CSV</h4>
                                    <div class="glass-dark p-6 rounded-2xl border-2 border-dashed border-white/20">
                                        <input type="file" id="csvFile" accept=".csv" class="w-full px-4 py-3 input-premium rounded-xl mb-4">
                                        <p class="text-sm text-white/60 mb-4">Format: Nama, Jumlah, Ucapan</p>
                                        <button onclick="processBulkCSV()" class="w-full btn-premium py-3 rounded-xl font-semibold">
                                            <span class="flex items-center justify-center space-x-2">
                                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                                </svg>
                                                <span>Upload & Proses</span>
                                            </span>
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Manual Bulk Entry -->
                                <div class="space-y-6">
                                    <h4 class="text-lg font-semibold text-white/90">Input Manual</h4>
                                    <div class="space-y-4">
                                        <textarea id="bulkGuestList" rows="8" placeholder="Masukkan daftar tamu (satu per baris):&#10;Nama Tamu 1, 2, Ucapan untuk mempelai&#10;Nama Tamu 2, 1, Selamat menempuh hidup baru&#10;Nama Tamu 3, 3" class="w-full px-4 py-4 input-premium rounded-xl resize-none"></textarea>
                                        <button onclick="processBulkManual()" class="w-full btn-luxury py-3 rounded-xl font-semibold">
                                            <span class="flex items-center justify-center space-x-2">
                                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                                </svg>
                                                <span>Proses Bulk Check-in</span>
                                            </span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Bulk Results -->
                            <div id="bulkResults" class="hidden mt-8 p-6 glass-dark rounded-2xl">
                                <h4 class="text-lg font-semibold text-white/90 mb-4">Hasil Bulk Check-in</h4>
                                <div id="bulkResultsContent"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Messages Section -->
            <div id="messagesSection" class="section hidden p-6">
                <h2 class="font-playfair text-3xl font-bold mb-8">Ucapan & Doa</h2>
                <div id="messagesList" class="space-y-4">
                    <!-- Messages will be displayed here -->
                </div>
            </div>

            <!-- Analytics Section -->
            <div id="analyticsSection" class="section hidden p-6">
                <h2 class="font-playfair text-3xl font-bold mb-8">Grafik & Analitik</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl p-6 shadow-lg">
                        <h3 class="text-xl font-semibold mb-4">Check-in per Jam</h3>
                        <canvas id="hourlyChart"></canvas>
                    </div>
                    <div class="bg-white rounded-xl p-6 shadow-lg">
                        <h3 class="text-xl font-semibold mb-4">Status Kehadiran</h3>
                        <canvas id="statusChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Database Section -->
            <div id="databaseSection" class="section hidden p-6">
                <h2 class="font-playfair text-3xl font-bold mb-8">Database Tamu</h2>
                <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nama</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Jumlah</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Waktu</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ucapan</th>
                                </tr>
                            </thead>
                            <tbody id="guestTableBody" class="bg-white divide-y divide-gray-200">
                                <!-- Guest data will be displayed here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settingsSection" class="section hidden p-6">
                <h2 class="font-playfair text-3xl font-bold mb-8">Pengaturan</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Operator Settings -->
                    <div class="bg-white rounded-xl p-6 shadow-lg">
                        <h3 class="text-xl font-semibold mb-4">Pengaturan Operator</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal & Waktu</label>
                                <input type="datetime-local" id="eventDateTime" class="w-full px-4 py-3 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Musik Latar</label>
                                <input type="file" id="backgroundMusic" accept="audio/*" class="w-full px-4 py-3 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Volume</label>
                                <input type="range" id="volumeControl" min="0" max="100" value="50" class="w-full">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tema</label>
                                <select id="themeSelect" class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-white">
                                    <option value="default">Default</option>
                                    <option value="romantic">Romantic (Pink & Gold)</option>
                                    <option value="elegant">Elegant (Navy & Silver)</option>
                                    <option value="modern">Modern (Purple & Blue)</option>
                                    <option value="classic">Classic (Maroon & Cream)</option>
                                    <option value="garden">Garden (Green & White)</option>
                                    <option value="minimalist">Minimalist Layout</option>
                                    <option value="luxury">Luxury Gold Layout</option>
                                    <option value="neon">Neon Cyber Layout</option>
                                    <option value="vintage">Vintage Retro Layout</option>
                                    <option value="nature">Nature Organic Layout</option>
                                    <option value="royal">Royal Palace Layout</option>
                                </select>
                            </div>
                            <button onclick="applySelectedTheme()" class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 font-semibold mt-4">
                                🎨 Terapkan Tema
                            </button>
                        </div>
                    </div>
                    
                    <!-- Admin Settings -->
                    <div id="adminSettings" class="bg-white rounded-xl p-6 shadow-lg">
                        <h3 class="text-xl font-semibold mb-6">Pengaturan Admin</h3>
                        
                        <!-- Client ID Generator Section -->
                        <div class="border-b pb-6 mb-6">
                            <h4 class="text-lg font-semibold mb-4 text-blue-600">🆔 Generator ID Client Baru</h4>
                            <div class="space-y-4">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Nama Mempelai</label>
                                        <input type="text" id="newCoupleNames" placeholder="Contoh: Sari & Budi" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal Pernikahan</label>
                                        <input type="date" id="newWeddingDate" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Tema Website</label>
                                        <select id="newWebTheme" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white">
                                            <option value="romantic" selected>Romantic (Pink & Gold)</option>
                                            <option value="elegant">Elegant (Navy & Silver)</option>
                                            <option value="modern">Modern (Purple & Blue)</option>
                                            <option value="classic">Classic (Maroon & Cream)</option>
                                            <option value="garden">Garden (Green & White)</option>
                                            <option value="minimalist">Minimalist Layout</option>
                                            <option value="luxury">Luxury Gold Layout</option>
                                            <option value="neon">Neon Cyber Layout</option>
                                            <option value="vintage">Vintage Retro Layout</option>
                                            <option value="nature">Nature Organic Layout</option>
                                            <option value="royal">Royal Palace Layout</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Max Operator</label>
                                        <select id="maxOperators" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white">
                                            <option value="1">1 Operator</option>
                                            <option value="2">2 Operator</option>
                                            <option value="3" selected>3 Operator</option>
                                            <option value="5">5 Operator</option>
                                            <option value="10">10 Operator</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Password Client</label>
                                    <div class="flex space-x-2">
                                        <input type="text" id="clientPassword" placeholder="Password untuk akses client" class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                        <button onclick="generateRandomPassword()" class="px-4 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600">🎲 Random</button>
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">Password ini akan digunakan client untuk akses ke ID mereka</p>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Logo Custom (Opsional)</label>
                                    <input type="file" id="newCustomLogo" accept="image/*" class="w-full px-4 py-3 border border-gray-300 rounded-lg">
                                    <p class="text-xs text-gray-500 mt-1">Upload logo untuk mengganti icon love di home dan navbar</p>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Foto Background (Opsional)</label>
                                    <input type="file" id="newBackgroundPhoto" accept="image/*" class="w-full px-4 py-3 border border-gray-300 rounded-lg">
                                </div>
                                
                                <button onclick="generateNewClientID()" class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 font-semibold">
                                    🚀 Generate ID Client Baru
                                </button>
                                
                                <div id="generatedClientInfo" class="hidden mt-4 p-4 bg-green-50 border border-green-200 rounded-lg">
                                    <p class="text-sm font-medium text-green-800 mb-3">ID Client berhasil dibuat!</p>
                                    <div class="space-y-2">
                                        <div class="flex items-center space-x-2">
                                            <label class="text-xs font-medium text-green-700 w-20">URL:</label>
                                            <input type="text" id="newClientURL" readonly class="flex-1 px-2 py-1 bg-white border border-green-300 rounded text-xs">
                                            <button onclick="copyClientURL()" class="px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700">Copy</button>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <label class="text-xs font-medium text-green-700 w-20">ID:</label>
                                            <input type="text" id="newClientID" readonly class="flex-1 px-2 py-1 bg-white border border-green-300 rounded text-xs">
                                            <button onclick="copyClientID()" class="px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700">Copy</button>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <label class="text-xs font-medium text-green-700 w-20">Password:</label>
                                            <input type="text" id="newClientPass" readonly class="flex-1 px-2 py-1 bg-white border border-green-300 rounded text-xs">
                                            <button onclick="copyClientPassword()" class="px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700">Copy</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Admin Management Section -->
                        <div class="border-b pb-6 mb-6">
                            <h4 class="text-lg font-semibold mb-4 text-green-600">👤 Manajemen Admin</h4>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Tambah Admin Baru</label>
                                    <input type="text" id="newAdminUsername" placeholder="Username admin baru" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Password Admin Baru</label>
                                    <input type="password" id="newAdminPassword" placeholder="Password admin baru" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                                </div>
                                <button onclick="addNewAdmin()" class="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors font-semibold">
                                    ➕ Tambah Admin
                                </button>
                                
                                <!-- Admin List -->
                                <div class="mt-4">
                                    <h5 class="text-sm font-medium text-gray-700 mb-2">Daftar Admin:</h5>
                                    <div id="adminList" class="space-y-2">
                                        <!-- Admin list will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ID Management System -->
                        <div class="border-b pb-6 mb-6">
                            <h4 class="text-lg font-semibold mb-4 text-purple-600">🆔 Sistem ID Client</h4>
                            <div class="space-y-4">
                                <div class="p-4 bg-blue-50 border border-blue-200 rounded-lg">
                                    <h5 class="font-semibold text-blue-800 mb-2">Server URL Utama:</h5>
                                    <div class="flex items-center space-x-2">
                                        <input type="text" id="serverURL" value="https://wedding-book.app" class="flex-1 px-3 py-2 border border-blue-300 rounded text-sm focus:ring-2 focus:ring-blue-500">
                                        <button onclick="updateServerURL()" class="px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700">Update</button>
                                    </div>
                                    <p class="text-xs text-blue-600 mt-1">URL server utama untuk semua client</p>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Format ID</label>
                                        <select id="idFormat" class="w-full px-3 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-purple-500 bg-white">
                                            <option value="name-date" selected>Nama-Tanggal</option>
                                            <option value="auto">Auto Generate</option>
                                            <option value="custom">Custom ID</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Panjang ID</label>
                                        <select id="idLength" class="w-full px-3 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-purple-500 bg-white">
                                            <option value="6">6 Karakter</option>
                                            <option value="8" selected>8 Karakter</option>
                                            <option value="10">10 Karakter</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div id="customIdInput" class="hidden">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Custom ID</label>
                                    <input type="text" id="customId" placeholder="masukkan-id-custom" class="w-full px-3 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-purple-500">
                                    <p class="text-xs text-gray-500 mt-1">Hanya huruf kecil, angka, dan tanda hubung</p>
                                </div>
                                
                                <div class="mt-4 p-3 bg-green-50 border border-green-200 rounded-lg">
                                    <p class="text-sm text-green-800 mb-2">
                                        <strong>Preview URL:</strong> <span id="idPreview">https://wedding-book.app/?id=saribudi1224</span>
                                    </p>
                                    <p class="text-xs text-green-600">
                                        Format: 4 huruf nama pertama + 4 huruf nama kedua + tanggal (DDMM)
                                        <br>Contoh: "Sari & Budi" tanggal 12/24 → saribudi1224
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Current Admin Settings -->
                        <div>
                            <h4 class="text-lg font-semibold mb-4 text-orange-600">🔧 Pengaturan Akun Saat Ini</h4>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Ganti Password</label>
                                    <input type="password" id="currentNewPassword" placeholder="Password baru untuk akun ini" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500">
                                </div>
                                <button onclick="changeCurrentPassword()" class="w-full bg-orange-600 text-white py-3 rounded-lg hover:bg-orange-700 transition-colors font-semibold">
                                    🔐 Ganti Password
                                </button>
                                
                                <!-- Current Website Settings -->
                                <div class="mt-6 pt-4 border-t">
                                    <h5 class="text-sm font-medium text-gray-700 mb-3">Update Website Saat Ini:</h5>
                                    <div class="space-y-3">
                                        <div>
                                            <label class="block text-xs text-gray-600 mb-1">Nama Mempelai</label>
                                            <input type="text" id="currentCoupleNames" placeholder="Sarah & Ahmad" class="w-full px-3 py-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-orange-500">
                                        </div>
                                        <div>
                                            <label class="block text-xs text-gray-600 mb-1">Foto Background</label>
                                            <input type="file" id="currentBackgroundPhoto" accept="image/*" class="w-full px-3 py-2 border border-gray-300 rounded text-sm">
                                        </div>
                                        <button onclick="updateCurrentWebsite()" class="w-full bg-gray-600 text-white py-2 rounded text-sm hover:bg-gray-700 transition-colors">
                                            💾 Update Website Ini
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Client ID Management Section -->
            <div id="websitesSection" class="section hidden p-6">
                <h2 class="font-playfair text-3xl font-bold mb-8">Kelola Client ID</h2>
                
                <!-- Statistics Cards -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white rounded-xl p-6 shadow-lg">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Total Client</p>
                                <p class="text-2xl font-bold text-blue-600" id="totalClients">0</p>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl p-6 shadow-lg">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Client Aktif</p>
                                <p class="text-2xl font-bold text-green-600" id="activeClients">0</p>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl p-6 shadow-lg">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Total Operator</p>
                                <p class="text-2xl font-bold text-purple-600" id="totalOperators">0</p>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-full">
                                <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl p-6 shadow-lg">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Bulan Ini</p>
                                <p class="text-2xl font-bold text-orange-600" id="monthlyClients">0</p>
                            </div>
                            <div class="bg-orange-100 p-3 rounded-full">
                                <svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Client Table -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                    <div class="p-6 border-b">
                        <div class="flex items-center justify-between">
                            <h3 class="text-xl font-semibold">Daftar Client ID</h3>
                            <div class="flex space-x-2">
                                <input type="text" id="searchClient" placeholder="Cari client..." class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500">
                                <select id="filterStatus" class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 bg-white">
                                    <option value="">Semua Status</option>
                                    <option value="active">Aktif</option>
                                    <option value="inactive">Tidak Aktif</option>
                                    <option value="expired">Expired</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID Client</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nama Mempelai</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tanggal</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tema</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Max Operator</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Dibuat</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="clientTableBody" class="bg-white divide-y divide-gray-200">
                                <!-- Client data will be displayed here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- About Section -->
            <div id="aboutSection" class="section hidden p-6">
                <h2 class="font-playfair text-3xl font-bold mb-8">About Us</h2>
                <div class="bg-white rounded-xl p-8 shadow-lg text-center">
                    <h3 class="text-2xl font-semibold mb-4">Wedding Guest Book Digital</h3>
                    <p class="text-gray-600 mb-6">Sistem buku tamu digital modern untuk pernikahan Anda</p>
                    <div class="space-y-2">
                        <p><strong>Website:</strong> weddingbook.digital</p>
                        <p><strong>No. HP:</strong> +62 812-3456-7890</p>
                        <p><strong>Instagram:</strong> @weddingbook.digital</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Guest Check-in Modal -->
    <div id="guestCheckinModal" class="modal fixed inset-0 bg-black bg-opacity-50 items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-8 w-full max-w-md mx-4">
            <h2 class="font-playfair text-2xl font-bold text-center mb-6">Check-in Tamu</h2>
            <form onsubmit="submitGuestCheckin(event)">
                <div class="mb-4">
                    <label for="modalGuestName" class="block text-sm font-medium text-gray-700 mb-2">Nama Lengkap</label>
                    <input type="text" id="modalGuestName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div class="mb-4">
                    <label for="modalGuestCount" class="block text-sm font-medium text-gray-700 mb-2">Jumlah Hadir</label>
                    <input type="number" id="modalGuestCount" min="1" value="1" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div class="mb-6">
                    <label for="modalGuestMessage" class="block text-sm font-medium text-gray-700 mb-2">Ucapan & Doa</label>
                    <textarea id="modalGuestMessage" rows="4" placeholder="Tuliskan ucapan dan doa untuk mempelai..." class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"></textarea>
                </div>
                <div class="flex space-x-4">
                    <button type="submit" class="flex-1 bg-gradient-wedding text-white py-3 rounded-lg font-semibold">Check-in</button>
                    <button type="button" onclick="closeModal('guestCheckinModal')" class="flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-semibold">Batal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Message Popup -->
    <div id="messagePopup" class="fixed top-4 right-4 bg-white rounded-lg shadow-lg p-4 max-w-sm transform translate-x-full transition-transform duration-300 z-50">
        <div class="flex items-start space-x-3">
            <div class="bg-blue-100 p-2 rounded-full">
                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                </svg>
            </div>
            <div class="flex-1">
                <p class="font-semibold text-sm" id="popupGuestName"></p>
                <p class="text-gray-600 text-sm" id="popupMessage"></p>
                <p class="text-xs text-gray-400 mt-1" id="popupTime"></p>
            </div>
        </div>
    </div>

    <script>
        // Database simulation using localStorage
        const DB = {
            guests: JSON.parse(localStorage.getItem('wedding_guests') || '[]'),
            settings: JSON.parse(localStorage.getItem('wedding_settings') || '{"adminUsername": "admin", "adminPassword": "admin123", "coupleNames": "Sarah & Ahmad", "weddingDate": "2024-12-12", "serverURL": "https://wedding-book.app"}'),
            admins: JSON.parse(localStorage.getItem('wedding_admins') || '[{"username": "admin", "password": "admin123", "role": "super"}]'),
            clients: JSON.parse(localStorage.getItem('wedding_clients') || '[]'),
            
            saveGuests() {
                localStorage.setItem('wedding_guests', JSON.stringify(this.guests));
            },
            
            saveSettings() {
                localStorage.setItem('wedding_settings', JSON.stringify(this.settings));
            },
            
            saveAdmins() {
                localStorage.setItem('wedding_admins', JSON.stringify(this.admins));
            },
            
            saveClients() {
                localStorage.setItem('wedding_clients', JSON.stringify(this.clients));
            },
            
            addGuest(guest) {
                guest.id = Date.now();
                guest.timestamp = new Date().toISOString();
                this.guests.push(guest);
                this.saveGuests();
                return guest;
            },
            
            addAdmin(admin) {
                admin.id = Date.now();
                admin.createdAt = new Date().toISOString();
                admin.role = 'admin';
                this.admins.push(admin);
                this.saveAdmins();
                return admin;
            },
            
            addClient(client) {
                client.id = Date.now();
                client.createdAt = new Date().toISOString();
                client.status = 'active';
                client.operatorCount = 0;
                client.lastAccess = null;
                this.clients.push(client);
                this.saveClients();
                return client;
            },
            
            findAdmin(username, password) {
                return this.admins.find(admin => admin.username === username && admin.password === password);
            },
            
            updateAdminPassword(username, newPassword) {
                const admin = this.admins.find(a => a.username === username);
                if (admin) {
                    admin.password = newPassword;
                    this.saveAdmins();
                    return true;
                }
                return false;
            }
        };

        let currentUser = null;
        let currentRole = null;
        let currentClientId = null;
        let currentClient = null;
        let qrScanner = null;
        let sidebarVisible = true;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateDateTime();
            setInterval(updateDateTime, 1000);
            loadSettings();
            
            // Initialize sound effects
            SoundEffects.init();
            
            // Add click sounds to all buttons
            document.addEventListener('click', function(e) {
                if (e.target.tagName === 'BUTTON' || e.target.closest('button')) {
                    // Don't play click sound for QR scanner button (it has its own sound)
                    if (!e.target.onclick || !e.target.onclick.toString().includes('startQRScanner')) {
                        SoundEffects.playClick();
                    }
                }
            });
            
            // Add click sounds to navigation items
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('nav-item') || e.target.closest('.nav-item')) {
                    SoundEffects.playClick();
                }
            });
            
            // Add click sounds to checkin tabs
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('checkin-tab') || e.target.closest('.checkin-tab')) {
                    SoundEffects.playClick();
                }
            });
        });

        function updateDateTime() {
            const now = new Date();
            document.getElementById('currentDateTime').textContent = now.toLocaleString('id-ID');
            document.getElementById('currentTime').textContent = now.toLocaleTimeString('id-ID', {hour: '2-digit', minute: '2-digit'});
        }

        function loadSettings() {
            document.getElementById('brideName').textContent = DB.settings.coupleNames;
            document.getElementById('weddingDate').textContent = new Date(DB.settings.weddingDate).toLocaleDateString('id-ID', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // Load server URL
            const serverURLInput = document.getElementById('serverURL');
            if (serverURLInput) {
                serverURLInput.value = DB.settings.serverURL || 'https://wedding-book.app';
            }
            
            // Load custom logo if exists
            loadCustomLogo();
            
            updateStats();
            updateClientStats();
        }
        
        function loadCustomLogo() {
            let logoDataURL = null;
            
            // Get logo from current client or admin settings
            if (currentRole === 'operator' && currentClient && currentClient.customLogo) {
                logoDataURL = currentClient.customLogo;
            } else if (currentRole === 'admin' && DB.settings.customLogo) {
                logoDataURL = DB.settings.customLogo;
            }
            
            if (logoDataURL) {
                applyCustomLogo(logoDataURL);
            }
        }
        
        function applyCustomLogo(logoDataURL) {
            // Replace all love icons with custom logo
            const loveIcons = document.querySelectorAll('svg path[d*="4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"]');
            
            loveIcons.forEach(icon => {
                const svg = icon.closest('svg');
                if (svg) {
                    // Create img element to replace SVG
                    const img = document.createElement('img');
                    img.src = logoDataURL;
                    img.className = svg.className;
                    img.style.width = svg.style.width || '24px';
                    img.style.height = svg.style.height || '24px';
                    img.style.objectFit = 'contain';
                    img.alt = 'Custom Logo';
                    
                    // Replace SVG with image
                    svg.parentNode.replaceChild(img, svg);
                }
            });
            
            // Also replace the main logo in home section
            const mainLogo = document.querySelector('.bg-gradient-gold svg');
            if (mainLogo) {
                const container = mainLogo.parentElement;
                container.innerHTML = `<img src="${logoDataURL}" class="w-12 h-12 object-contain" alt="Custom Logo">`;
            }
            
            // Replace sidebar logo
            const sidebarLogo = document.querySelector('.sidebar .bg-gradient-gold svg');
            if (sidebarLogo) {
                const container = sidebarLogo.parentElement;
                container.innerHTML = `<img src="${logoDataURL}" class="w-6 h-6 object-contain" alt="Custom Logo">`;
            }
        }

        function updateStats() {
            // Filter guests berdasarkan client ID saat ini
            const clientGuests = currentClientId ? 
                DB.guests.filter(g => g.clientId === currentClientId) : 
                DB.guests;
            
            const totalGuests = clientGuests.length;
            const totalMessages = clientGuests.filter(g => g.message && g.message.trim()).length;
            
            document.getElementById('totalCheckin').textContent = totalGuests;
            document.getElementById('totalMessages').textContent = totalMessages;
        }

        // Login functions
        function showOperatorLogin() {
            document.getElementById('operatorModal').classList.add('active');
        }

        function showAdminLogin() {
            document.getElementById('adminModal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function operatorLogin(event) {
            event.preventDefault();
            const clientId = document.getElementById('operatorClientId').value.trim();
            const name = document.getElementById('operatorName').value.trim();
            const password = document.getElementById('operatorPassword').value.trim();
            
            // Validasi input
            if (!clientId || !name || !password) {
                SoundEffects.playError();
                showNotification('Mohon lengkapi semua field!', 'error');
                return;
            }
            
            // Cari client berdasarkan ID
            const client = DB.clients.find(c => c.clientID === clientId);
            
            if (!client) {
                SoundEffects.playError();
                showNotification('ID Client tidak ditemukan!', 'error');
                return;
            }
            
            if (client.status !== 'active') {
                SoundEffects.playError();
                showNotification('Client tidak aktif! Hubungi admin.', 'error');
                return;
            }
            
            if (client.password !== password) {
                SoundEffects.playError();
                showNotification('Password salah!', 'error');
                return;
            }
            
            // Cek batas maksimal operator
            if (client.operatorCount >= client.maxOperators) {
                SoundEffects.playError();
                showNotification(`Maksimal ${client.maxOperators} operator sudah tercapai!`, 'error');
                return;
            }
            
            // Login berhasil - play success sound
            SoundEffects.playSuccess();
            
            currentUser = name;
            currentRole = 'operator';
            currentClientId = clientId;
            currentClient = client;
            
            // Update operator count
            client.operatorCount++;
            client.lastAccess = new Date().toISOString();
            DB.saveClients();
            
            // Update UI dengan data client
            document.getElementById('currentUser').textContent = name;
            document.getElementById('userRole').textContent = 'Operator';
            document.getElementById('brideName').textContent = client.coupleNames;
            document.getElementById('weddingDate').textContent = new Date(client.weddingDate).toLocaleDateString('id-ID', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // Apply theme
            applyTheme(client.theme);
            
            showDashboard();
            closeModal('operatorModal');
            
            // Load and apply client theme
            loadCurrentTheme();
            
            // Load custom logo if exists
            loadCustomLogo();
            
            // Reset form
            document.getElementById('operatorClientId').value = '';
            document.getElementById('operatorName').value = '';
            document.getElementById('operatorPassword').value = '';
            
            showNotification(`Selamat datang, ${name}!`, 'success');
        }

        function adminLogin(event) {
            event.preventDefault();
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;
            
            const admin = DB.findAdmin(username, password);
            if (admin) {
                // Play success sound for successful login
                SoundEffects.playSuccess();
                
                currentUser = username;
                currentRole = 'admin';
                document.getElementById('currentUser').textContent = username;
                document.getElementById('userRole').textContent = admin.role === 'super' ? 'Super Admin' : 'Admin';
                showDashboard();
                closeModal('adminModal');
                loadAdminList();
                
                // Load current theme for admin
                loadCurrentTheme();
                
                showNotification(`Selamat datang, ${username}!`, 'success');
            } else {
                SoundEffects.playError();
                showNotification('Username atau password salah!', 'error');
            }
        }

        function showDashboard() {
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('dashboard').classList.remove('hidden');
            
            // Hide admin settings if operator
            if (currentRole === 'operator') {
                document.getElementById('adminSettings').style.display = 'none';
                document.getElementById('websiteManagementNav').classList.add('hidden');
            } else {
                document.getElementById('adminSettings').style.display = 'block';
                document.getElementById('websiteManagementNav').classList.remove('hidden');
            }
            
            showSection('home');
            loadGuestTable();
            initCharts();
        }

        function logout() {
            // Kurangi operator count jika operator yang logout
            if (currentRole === 'operator' && currentClient) {
                currentClient.operatorCount = Math.max(0, currentClient.operatorCount - 1);
                DB.saveClients();
            }
            
            currentUser = null;
            currentRole = null;
            currentClientId = null;
            currentClient = null;
            
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('loginSection').style.display = 'flex';
            
            // Reset forms
            document.getElementById('operatorClientId').value = '';
            document.getElementById('operatorName').value = '';
            document.getElementById('operatorPassword').value = '';
            document.getElementById('adminUsername').value = '';
            document.getElementById('adminPassword').value = '';
            
            showNotification('Berhasil logout!', 'success');
        }

        // Navigation
        function toggleSidebar() {
            sidebarVisible = !sidebarVisible;
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            if (sidebarVisible) {
                sidebar.classList.remove('sidebar-hidden');
                sidebar.classList.add('sidebar-visible');
                mainContent.classList.remove('ml-0');
                mainContent.classList.add('ml-64');
            } else {
                sidebar.classList.remove('sidebar-visible');
                sidebar.classList.add('sidebar-hidden');
                mainContent.classList.remove('ml-64');
                mainContent.classList.add('ml-0');
            }
        }

        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionName + 'Section').classList.remove('hidden');
            
            // Load section-specific data
            if (sectionName === 'messages') {
                loadMessages();
            } else if (sectionName === 'database') {
                loadGuestTable();
            } else if (sectionName === 'analytics') {
                updateCharts();
            } else if (sectionName === 'websites') {
                loadClientTable();
                updateClientStats();
            }
        }

        // Sound Effects
        const SoundEffects = {
            // Create audio context for sound generation
            audioContext: null,
            
            init() {
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                } catch (e) {
                    console.log('Audio context not supported');
                }
            },
            
            // Success sound (pleasant chime)
            playSuccess() {
                if (!this.audioContext) return;
                
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                // Create a pleasant success chord
                oscillator.frequency.setValueAtTime(523.25, this.audioContext.currentTime); // C5
                oscillator.frequency.setValueAtTime(659.25, this.audioContext.currentTime + 0.1); // E5
                oscillator.frequency.setValueAtTime(783.99, this.audioContext.currentTime + 0.2); // G5
                
                oscillator.type = 'sine';
                gainNode.gain.setValueAtTime(0.3, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.8);
                
                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + 0.8);
            },
            
            // QR Scan detected sound (beep)
            playQRScan() {
                if (!this.audioContext) return;
                
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                oscillator.frequency.setValueAtTime(800, this.audioContext.currentTime);
                oscillator.frequency.setValueAtTime(1000, this.audioContext.currentTime + 0.1);
                
                oscillator.type = 'square';
                gainNode.gain.setValueAtTime(0.2, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.3);
                
                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + 0.3);
            },
            
            // Error sound (low tone)
            playError() {
                if (!this.audioContext) return;
                
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                oscillator.frequency.setValueAtTime(200, this.audioContext.currentTime);
                oscillator.frequency.setValueAtTime(150, this.audioContext.currentTime + 0.2);
                
                oscillator.type = 'sawtooth';
                gainNode.gain.setValueAtTime(0.2, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.5);
                
                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + 0.5);
            },
            
            // Button click sound (soft click)
            playClick() {
                if (!this.audioContext) return;
                
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                oscillator.frequency.setValueAtTime(1200, this.audioContext.currentTime);
                oscillator.type = 'sine';
                gainNode.gain.setValueAtTime(0.1, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.1);
                
                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + 0.1);
            },
            
            // Notification sound (gentle ping)
            playNotification() {
                if (!this.audioContext) return;
                
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                oscillator.frequency.setValueAtTime(880, this.audioContext.currentTime); // A5
                oscillator.type = 'sine';
                gainNode.gain.setValueAtTime(0.2, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.6);
                
                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + 0.6);
            }
        };

        // QR Code functions
        function startQRScanner() {
            const qrReader = document.getElementById('qr-reader');
            
            if (qrScanner) {
                qrScanner.stop();
            }
            
            // Play click sound when starting scanner
            SoundEffects.playClick();
            
            qrScanner = new Html5QrcodeScanner("qr-reader", {
                fps: 10,
                qrbox: {width: 250, height: 250}
            });
            
            qrScanner.render((decodedText, decodedResult) => {
                // Play QR scan detected sound
                SoundEffects.playQRScan();
                
                // Process QR code result
                if (decodedText.includes('wedding-checkin')) {
                    document.getElementById('guestCheckinModal').classList.add('active');
                    qrScanner.stop();
                    
                    // Show success notification with sound
                    showNotification('QR Code berhasil dipindai! Silakan isi data tamu.', 'success');
                } else {
                    // Handle other QR codes or show guest check-in modal anyway
                    document.getElementById('guestCheckinModal').classList.add('active');
                    qrScanner.stop();
                    
                    // Show notification for any QR code
                    showNotification('QR Code terdeteksi! Silakan isi data check-in.', 'info');
                }
            }, (errorMessage) => {
                // QR scan error (optional to handle)
                console.log('QR Scan error:', errorMessage);
            });
        }

        function generateQR() {
            const canvas = document.getElementById('qrCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 192;
            canvas.height = 192;
            
            // Simple QR code simulation
            ctx.fillStyle = '#000';
            for (let i = 0; i < 24; i++) {
                for (let j = 0; j < 24; j++) {
                    if (Math.random() > 0.5) {
                        ctx.fillRect(i * 8, j * 8, 8, 8);
                    }
                }
            }
            
            // Add corner markers
            ctx.fillRect(0, 0, 56, 56);
            ctx.fillRect(136, 0, 56, 56);
            ctx.fillRect(0, 136, 56, 56);
            
            ctx.fillStyle = '#fff';
            ctx.fillRect(8, 8, 40, 40);
            ctx.fillRect(144, 8, 40, 40);
            ctx.fillRect(8, 144, 40, 40);
            
            ctx.fillStyle = '#000';
            ctx.fillRect(16, 16, 24, 24);
            ctx.fillRect(152, 16, 24, 24);
            ctx.fillRect(16, 152, 24, 24);
        }

        // Check-in functions
        function manualCheckin(event) {
            event.preventDefault();
            const name = document.getElementById('guestName').value;
            const count = parseInt(document.getElementById('guestCount').value);
            const message = document.getElementById('guestMessage').value;
            
            // Validate input
            if (!name.trim()) {
                SoundEffects.playError();
                showNotification('Nama tamu tidak boleh kosong!', 'error');
                return;
            }
            
            const guest = {
                name: name,
                count: count,
                message: message,
                status: 'checked-in',
                method: 'manual',
                clientId: currentClientId,
                operatorName: currentUser
            };
            
            DB.addGuest(guest);
            updateStats();
            loadGuestTable();
            
            // Play success sound
            SoundEffects.playSuccess();
            
            // Reset form
            document.getElementById('guestName').value = '';
            document.getElementById('guestCount').value = '1';
            document.getElementById('guestMessage').value = '';
            
            // Show success message
            showNotification('Check-in berhasil!', 'success');
            
            // Show message popup if there's a message
            if (message.trim()) {
                showMessagePopup(name, message);
            }
        }

        function submitGuestCheckin(event) {
            event.preventDefault();
            const name = document.getElementById('modalGuestName').value;
            const count = parseInt(document.getElementById('modalGuestCount').value);
            const message = document.getElementById('modalGuestMessage').value;
            
            // Validate input
            if (!name.trim()) {
                SoundEffects.playError();
                showNotification('Nama tamu tidak boleh kosong!', 'error');
                return;
            }
            
            const guest = {
                name: name,
                count: count,
                message: message,
                status: 'checked-in',
                method: 'qr-self',
                clientId: currentClientId,
                operatorName: currentUser
            };
            
            DB.addGuest(guest);
            updateStats();
            loadGuestTable();
            
            // Play success sound
            SoundEffects.playSuccess();
            
            closeModal('guestCheckinModal');
            
            // Reset form
            document.getElementById('modalGuestName').value = '';
            document.getElementById('modalGuestCount').value = '1';
            document.getElementById('modalGuestMessage').value = '';
            
            // Show message popup if there's a message
            if (message.trim()) {
                showMessagePopup(name, message);
            }
        }

        // Message functions
        function loadMessages() {
            const messagesList = document.getElementById('messagesList');
            
            // Filter messages berdasarkan client ID saat ini
            const clientMessages = currentClientId ? 
                DB.guests.filter(g => g.clientId === currentClientId && g.message && g.message.trim()) :
                DB.guests.filter(g => g.message && g.message.trim());
            
            if (clientMessages.length === 0) {
                messagesList.innerHTML = `
                    <div class="bg-white rounded-lg p-8 shadow-lg text-center">
                        <div class="text-gray-400 mb-4">
                            <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                            </svg>
                        </div>
                        <p class="text-gray-500">Belum ada ucapan dari tamu</p>
                    </div>
                `;
                return;
            }
            
            messagesList.innerHTML = clientMessages.map(guest => `
                <div class="bg-white rounded-lg p-6 shadow-lg">
                    <div class="flex items-start space-x-4">
                        <div class="bg-blue-100 p-3 rounded-full">
                            <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                        <div class="flex-1">
                            <h4 class="font-semibold text-lg">${guest.name}</h4>
                            <p class="text-gray-600 mt-2">${guest.message}</p>
                            <div class="flex items-center justify-between mt-2">
                                <p class="text-sm text-gray-400">${new Date(guest.timestamp).toLocaleString('id-ID')}</p>
                                ${guest.operatorName ? `<p class="text-xs text-blue-500">oleh: ${guest.operatorName}</p>` : ''}
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function showMessagePopup(name, message) {
            document.getElementById('popupGuestName').textContent = name;
            document.getElementById('popupMessage').textContent = message;
            document.getElementById('popupTime').textContent = new Date().toLocaleTimeString('id-ID');
            
            const popup = document.getElementById('messagePopup');
            popup.classList.remove('translate-x-full');
            
            setTimeout(() => {
                popup.classList.add('translate-x-full');
            }, 5000);
        }

        // Database functions
        function loadGuestTable() {
            const tbody = document.getElementById('guestTableBody');
            
            // Filter guests berdasarkan client ID saat ini
            const clientGuests = currentClientId ? 
                DB.guests.filter(g => g.clientId === currentClientId) : 
                DB.guests;
            
            if (clientGuests.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" class="px-6 py-8 text-center text-gray-500">
                            <div class="flex flex-col items-center">
                                <svg class="w-12 h-12 text-gray-300 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                </svg>
                                <p>Belum ada tamu yang check-in</p>
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = clientGuests.map(guest => `
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${guest.name}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${guest.count}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${new Date(guest.timestamp).toLocaleString('id-ID')}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                            ${guest.status}
                        </span>
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-500 max-w-xs truncate">${guest.message || '-'}</td>
                </tr>
            `).join('');
        }

        // Charts
        function initCharts() {
            // Hourly check-in chart
            const hourlyCtx = document.getElementById('hourlyChart').getContext('2d');
            new Chart(hourlyCtx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 24}, (_, i) => i + ':00'),
                    datasets: [{
                        label: 'Check-in per Jam',
                        data: Array.from({length: 24}, () => Math.floor(Math.random() * 10)),
                        borderColor: 'rgb(59, 130, 246)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // Status chart
            const statusCtx = document.getElementById('statusChart').getContext('2d');
            new Chart(statusCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Sudah Check-in', 'Belum Check-in'],
                    datasets: [{
                        data: [DB.guests.length, 150 - DB.guests.length],
                        backgroundColor: ['#10B981', '#EF4444']
                    }]
                },
                options: {
                    responsive: true
                }
            });
        }

        function updateCharts() {
            // Update charts with real data
            initCharts();
        }

        // ID Generation functions
        function generateClientID(format, length, coupleNames, weddingDate) {
            switch(format) {
                case 'custom':
                    return document.getElementById('customId').value.toLowerCase().replace(/[^a-z0-9-]/g, '');
                case 'name-date':
                    // Ambil nama pertama dari setiap mempelai
                    const namesParts = coupleNames.split('&').map(name => name.trim());
                    const firstName = namesParts[0] ? namesParts[0].toLowerCase().replace(/[^a-z]/g, '').substr(0, 4) : 'nama';
                    const secondName = namesParts[1] ? namesParts[1].toLowerCase().replace(/[^a-z]/g, '').substr(0, 4) : 'nama';
                    
                    // Format tanggal: DDMM
                    const dateObj = new Date(weddingDate);
                    const day = String(dateObj.getDate()).padStart(2, '0');
                    const month = String(dateObj.getMonth() + 1).padStart(2, '0');
                    
                    return firstName + secondName + day + month;
                case 'auto':
                default:
                    return Math.random().toString(36).substr(2, parseInt(length)).toUpperCase();
            }
        }
        
        function generateRandomPassword() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let password = '';
            for (let i = 0; i < 8; i++) {
                password += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            document.getElementById('clientPassword').value = password;
        }
        
        function updateIDPreview() {
            const format = document.getElementById('idFormat').value;
            const length = document.getElementById('idLength').value;
            const serverURL = document.getElementById('serverURL').value || 'https://wedding-book.app';
            
            let sampleID = '';
            switch(format) {
                case 'custom':
                    sampleID = 'custom-id';
                    break;
                case 'name-date':
                    sampleID = 'saribudi1224';
                    break;
                case 'auto':
                default:
                    sampleID = 'ABC12345'.substr(0, parseInt(length));
                    break;
            }
            
            document.getElementById('idPreview').textContent = serverURL + '/?id=' + sampleID;
            
            // Show/hide custom input
            const customInput = document.getElementById('customIdInput');
            if (format === 'custom') {
                customInput.classList.remove('hidden');
            } else {
                customInput.classList.add('hidden');
            }
        }

        // New client functions
        function generateNewClientID() {
            const coupleNames = document.getElementById('newCoupleNames').value.trim();
            const weddingDate = document.getElementById('newWeddingDate').value;
            const theme = document.getElementById('newWebTheme').value;
            const maxOperators = parseInt(document.getElementById('maxOperators').value);
            const clientPassword = document.getElementById('clientPassword').value.trim();
            const format = document.getElementById('idFormat').value;
            const length = document.getElementById('idLength').value;
            const logoFile = document.getElementById('newCustomLogo')?.files[0];
            
            // Debug log untuk melihat nilai field
            console.log('Debug values:', {
                coupleNames: coupleNames,
                weddingDate: weddingDate,
                clientPassword: clientPassword,
                theme: theme,
                maxOperators: maxOperators
            });
            
            if (!coupleNames) {
                showNotification('Mohon isi nama mempelai!', 'error');
                return;
            }
            
            if (!weddingDate) {
                showNotification('Mohon pilih tanggal pernikahan!', 'error');
                return;
            }
            
            if (!clientPassword) {
                showNotification('Mohon isi password client!', 'error');
                return;
            }
            
            // Generate client ID
            const clientID = generateClientID(format, length, coupleNames, weddingDate);
            
            // Check if ID already exists
            if (DB.clients.find(c => c.clientID === clientID)) {
                showNotification('ID sudah digunakan! Silakan generate ulang.', 'error');
                return;
            }
            
            const serverURL = DB.settings.serverURL || 'https://wedding-book.app';
            const fullURL = serverURL + '/?id=' + clientID;
            
            const client = {
                clientID: clientID,
                coupleNames: coupleNames,
                weddingDate: weddingDate,
                theme: theme,
                maxOperators: maxOperators,
                password: clientPassword,
                url: fullURL,
                createdBy: currentUser
            };
            
            // Handle logo upload for new client
            if (logoFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    client.customLogo = e.target.result;
                    const newClient = DB.addClient(client);
                    completeClientCreation();
                };
                reader.readAsDataURL(logoFile);
            } else {
                const newClient = DB.addClient(client);
                completeClientCreation();
            }
            
            function completeClientCreation() {
                // Show generated info
                document.getElementById('newClientURL').value = fullURL;
                document.getElementById('newClientID').value = clientID;
                document.getElementById('newClientPass').value = clientPassword;
                document.getElementById('generatedClientInfo').classList.remove('hidden');
                
                // Reset form
                document.getElementById('newCoupleNames').value = '';
                document.getElementById('newWeddingDate').value = '';
                document.getElementById('newWebTheme').value = 'romantic';
                document.getElementById('maxOperators').value = '3';
                document.getElementById('clientPassword').value = '';
                if (document.getElementById('newCustomLogo')) {
                    document.getElementById('newCustomLogo').value = '';
                }
                
                // Update client table
                loadClientTable();
                updateClientStats();
                
                showNotification('ID Client baru berhasil dibuat!', 'success');
            }
        }
        
        function copyClientURL() {
            const urlInput = document.getElementById('newClientURL');
            urlInput.select();
            document.execCommand('copy');
            showNotification('URL berhasil disalin!', 'success');
        }
        
        function copyClientID() {
            const idInput = document.getElementById('newClientID');
            idInput.select();
            document.execCommand('copy');
            showNotification('ID berhasil disalin!', 'success');
        }
        
        function copyClientPassword() {
            const passInput = document.getElementById('newClientPass');
            passInput.select();
            document.execCommand('copy');
            showNotification('Password berhasil disalin!', 'success');
        }
        
        function updateServerURL() {
            const serverURL = document.getElementById('serverURL').value;
            if (!serverURL) {
                showNotification('URL server tidak boleh kosong!', 'error');
                return;
            }
            
            try {
                new URL(serverURL);
            } catch (e) {
                showNotification('Format URL tidak valid!', 'error');
                return;
            }
            
            DB.settings.serverURL = serverURL;
            DB.saveSettings();
            updateIDPreview();
            showNotification('URL server berhasil diupdate!', 'success');
        }
        
        function addNewAdmin() {
            const username = document.getElementById('newAdminUsername').value;
            const password = document.getElementById('newAdminPassword').value;
            
            if (!username || !password) {
                showNotification('Mohon lengkapi username dan password!', 'error');
                return;
            }
            
            // Check if username already exists
            if (DB.admins.find(admin => admin.username === username)) {
                showNotification('Username sudah digunakan!', 'error');
                return;
            }
            
            const newAdmin = {
                username: username,
                password: password
            };
            
            DB.addAdmin(newAdmin);
            loadAdminList();
            
            // Reset form
            document.getElementById('newAdminUsername').value = '';
            document.getElementById('newAdminPassword').value = '';
            
            showNotification('Admin baru berhasil ditambahkan!', 'success');
        }
        
        function loadAdminList() {
            const adminList = document.getElementById('adminList');
            adminList.innerHTML = DB.admins.map(admin => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div>
                        <p class="font-medium text-sm">${admin.username}</p>
                        <p class="text-xs text-gray-500">${admin.role === 'super' ? 'Super Admin' : 'Admin'}</p>
                    </div>
                    ${admin.role !== 'super' ? `
                        <button onclick="removeAdmin('${admin.username}')" class="text-red-600 hover:text-red-800 text-sm">
                            Hapus
                        </button>
                    ` : '<span class="text-xs text-blue-600">Super Admin</span>'}
                </div>
            `).join('');
        }
        
        function removeAdmin(username) {
            if (confirm('Yakin ingin menghapus admin ini?')) {
                DB.admins = DB.admins.filter(admin => admin.username !== username);
                DB.saveAdmins();
                loadAdminList();
                showNotification('Admin berhasil dihapus!', 'success');
            }
        }
        
        function changeCurrentPassword() {
            const newPassword = document.getElementById('currentNewPassword').value;
            
            if (!newPassword) {
                showNotification('Mohon masukkan password baru!', 'error');
                return;
            }
            
            if (DB.updateAdminPassword(currentUser, newPassword)) {
                document.getElementById('currentNewPassword').value = '';
                showNotification('Password berhasil diubah!', 'success');
            } else {
                showNotification('Gagal mengubah password!', 'error');
            }
        }
        
        function updateCurrentWebsite() {
            const coupleNames = document.getElementById('currentCoupleNames').value;
            const logoFile = document.getElementById('customLogo')?.files[0];
            
            if (coupleNames) {
                DB.settings.coupleNames = coupleNames;
                DB.saveSettings();
                loadSettings();
            }
            
            if (logoFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const logoDataURL = e.target.result;
                    
                    // Save logo to settings
                    if (currentRole === 'operator' && currentClient) {
                        currentClient.customLogo = logoDataURL;
                        DB.saveClients();
                    } else if (currentRole === 'admin') {
                        DB.settings.customLogo = logoDataURL;
                        DB.saveSettings();
                    }
                    
                    // Apply logo immediately
                    applyCustomLogo(logoDataURL);
                    SoundEffects.playSuccess();
                    showNotification('Logo berhasil diupload dan diterapkan!', 'success');
                };
                reader.readAsDataURL(logoFile);
            } else {
                SoundEffects.playSuccess();
            }
            
            document.getElementById('currentCoupleNames').value = '';
            if (document.getElementById('customLogo')) {
                document.getElementById('customLogo').value = '';
            }
            showNotification('Website berhasil diupdate!', 'success');
        }
        
        function loadClientTable() {
            const tbody = document.getElementById('clientTableBody');
            const searchTerm = document.getElementById('searchClient')?.value.toLowerCase() || '';
            const statusFilter = document.getElementById('filterStatus')?.value || '';
            
            let filteredClients = DB.clients;
            
            if (searchTerm) {
                filteredClients = filteredClients.filter(client => 
                    client.coupleNames.toLowerCase().includes(searchTerm) ||
                    client.clientID.toLowerCase().includes(searchTerm)
                );
            }
            
            if (statusFilter) {
                filteredClients = filteredClients.filter(client => client.status === statusFilter);
            }
            
            tbody.innerHTML = filteredClients.map(client => `
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                        <div class="flex items-center space-x-2">
                            <span class="font-mono bg-gray-100 px-2 py-1 rounded text-xs">${client.clientID}</span>
                            <button onclick="copyText('${client.clientID}')" class="text-blue-600 hover:text-blue-800 text-xs">📋</button>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${client.coupleNames}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${new Date(client.weddingDate).toLocaleDateString('id-ID')}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getThemeColor(client.theme)}">
                            ${getThemeName(client.theme)}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs">
                            ${client.operatorCount}/${client.maxOperators}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(client.status)}">
                            ${getStatusName(client.status)}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${new Date(client.createdAt).toLocaleDateString('id-ID')}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        <div class="flex space-x-2">
                            <button onclick="viewClientDetails(${client.id})" class="text-blue-600 hover:text-blue-800">Detail</button>
                            <button onclick="toggleClientStatus(${client.id})" class="text-yellow-600 hover:text-yellow-800">
                                ${client.status === 'active' ? 'Nonaktif' : 'Aktifkan'}
                            </button>
                            <button onclick="deleteClient(${client.id})" class="text-red-600 hover:text-red-800">Hapus</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }
        
        function updateClientStats() {
            const totalClients = DB.clients.length;
            const activeClients = DB.clients.filter(c => c.status === 'active').length;
            const totalOperators = DB.clients.reduce((sum, c) => sum + c.operatorCount, 0);
            const thisMonth = new Date().getMonth();
            const monthlyClients = DB.clients.filter(c => new Date(c.createdAt).getMonth() === thisMonth).length;
            
            document.getElementById('totalClients').textContent = totalClients;
            document.getElementById('activeClients').textContent = activeClients;
            document.getElementById('totalOperators').textContent = totalOperators;
            document.getElementById('monthlyClients').textContent = monthlyClients;
        }
        
        function getThemeColor(theme) {
            const colors = {
                romantic: 'bg-pink-100 text-pink-800',
                elegant: 'bg-blue-100 text-blue-800',
                modern: 'bg-purple-100 text-purple-800',
                classic: 'bg-red-100 text-red-800',
                garden: 'bg-green-100 text-green-800'
            };
            return colors[theme] || 'bg-gray-100 text-gray-800';
        }
        
        function getThemeName(theme) {
            const names = {
                romantic: 'Romantic',
                elegant: 'Elegant',
                modern: 'Modern',
                classic: 'Classic',
                garden: 'Garden',
                minimalist: 'Minimalist',
                luxury: 'Luxury Gold',
                neon: 'Neon Cyber',
                vintage: 'Vintage Retro',
                nature: 'Nature Organic',
                royal: 'Royal Palace'
            };
            return names[theme] || theme;
        }
        
        function getStatusColor(status) {
            const colors = {
                active: 'bg-green-100 text-green-800',
                inactive: 'bg-gray-100 text-gray-800',
                expired: 'bg-red-100 text-red-800'
            };
            return colors[status] || 'bg-gray-100 text-gray-800';
        }
        
        function getStatusName(status) {
            const names = {
                active: 'Aktif',
                inactive: 'Tidak Aktif',
                expired: 'Expired'
            };
            return names[status] || status;
        }
        
        function copyText(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification('Berhasil disalin!', 'success');
            });
        }
        
        function viewClientDetails(clientId) {
            const client = DB.clients.find(c => c.id === clientId);
            if (client) {
                const details = `
ID: ${client.clientID}
Nama: ${client.coupleNames}
Tanggal: ${new Date(client.weddingDate).toLocaleDateString('id-ID')}
URL: ${client.url}
Password: ${client.password}
Max Operator: ${client.maxOperators}
Status: ${getStatusName(client.status)}
Dibuat: ${new Date(client.createdAt).toLocaleString('id-ID')}
                `;
                
                // Create modal or alert with details
                showNotification('Detail client ditampilkan di console', 'info');
                console.log(details);
            }
        }
        
        function toggleClientStatus(clientId) {
            const client = DB.clients.find(c => c.id === clientId);
            if (client) {
                client.status = client.status === 'active' ? 'inactive' : 'active';
                DB.saveClients();
                loadClientTable();
                updateClientStats();
                showNotification(`Client ${client.status === 'active' ? 'diaktifkan' : 'dinonaktifkan'}!`, 'success');
            }
        }
        
        function deleteClient(clientId) {
            if (confirm('Yakin ingin menghapus client ini? Data tidak dapat dikembalikan!')) {
                DB.clients = DB.clients.filter(c => c.id !== clientId);
                DB.saveClients();
                loadClientTable();
                updateClientStats();
                showNotification('Client berhasil dihapus!', 'success');
            }
        }
        
        function copyWebsiteURL(url) {
            navigator.clipboard.writeText(url).then(() => {
                showNotification('URL berhasil disalin!', 'success');
            });
        }
        
        function viewWebsite(url) {
            window.open(url, '_blank', 'noopener,noreferrer');
        }
        
        function deleteWebsite(id) {
            if (confirm('Yakin ingin menghapus website ini?')) {
                DB.websites = DB.websites.filter(website => website.id !== id);
                DB.saveWebsites();
                loadWebsiteTable();
                showNotification('Website berhasil dihapus!', 'success');
            }
        }
        
        function updateDomainSettings() {
            const mainDomain = document.getElementById('mainDomain').value.trim();
            const subPath = document.getElementById('subPath').value.trim();
            
            if (!mainDomain) {
                showNotification('Domain utama tidak boleh kosong!', 'error');
                return;
            }
            
            // Validate URL format
            try {
                new URL(mainDomain);
            } catch (e) {
                showNotification('Format domain tidak valid! Gunakan format: https://domain.com', 'error');
                return;
            }
            
            DB.settings.mainDomain = mainDomain;
            DB.settings.subPath = subPath;
            DB.saveSettings();
            
            updateURLPreview();
            showNotification('Pengaturan domain berhasil disimpan!', 'success');
        }
        
        function updateURLPreview() {
            const mainDomain = document.getElementById('mainDomain').value || 'https://wedding-book.app';
            const subPath = document.getElementById('subPath').value || '';
            const sampleCode = 'abc123def';
            
            const previewURL = mainDomain + subPath + '/' + sampleCode;
            document.getElementById('urlPreview').textContent = previewURL;
        }
        
        // Add event listeners for real-time preview
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                // ID format listeners
                const idFormatSelect = document.getElementById('idFormat');
                const idLengthSelect = document.getElementById('idLength');
                const serverURLInput = document.getElementById('serverURL');
                const customIdInput = document.getElementById('customId');
                const searchClientInput = document.getElementById('searchClient');
                const filterStatusSelect = document.getElementById('filterStatus');
                
                if (idFormatSelect) {
                    idFormatSelect.addEventListener('change', updateIDPreview);
                }
                if (idLengthSelect) {
                    idLengthSelect.addEventListener('change', updateIDPreview);
                }
                if (serverURLInput) {
                    serverURLInput.addEventListener('input', updateIDPreview);
                }
                if (customIdInput) {
                    customIdInput.addEventListener('input', updateIDPreview);
                }
                if (searchClientInput) {
                    searchClientInput.addEventListener('input', loadClientTable);
                }
                if (filterStatusSelect) {
                    filterStatusSelect.addEventListener('change', loadClientTable);
                }
                
                // Initialize preview
                updateIDPreview();
            }, 1000);
        });

        // Utility functions
        function showNotification(message, type = 'info') {
            // Play notification sound based on type
            if (type === 'success') {
                // Success sound already played by calling function
            } else if (type === 'error') {
                // Error sound already played by calling function
            } else {
                SoundEffects.playNotification();
            }
            
            const notification = document.createElement('div');
            notification.className = `fixed top-4 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-lg text-white z-50 ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 'bg-blue-500'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Check-in Tab Functions
        function showCheckinTab(tabName) {
            // Remove active class from all tabs
            document.querySelectorAll('.checkin-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Hide all tab contents
            document.querySelectorAll('.checkin-tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Show selected tab content
            document.getElementById(tabName + 'Content').classList.remove('hidden');
            
            // Add active class to selected tab
            document.getElementById(tabName + 'Tab').classList.add('active');
        }
        
        // Bulk Check-in Functions
        function processBulkCSV() {
            const fileInput = document.getElementById('csvFile');
            const file = fileInput.files[0];
            
            if (!file) {
                showNotification('Mohon pilih file CSV terlebih dahulu!', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const csv = e.target.result;
                const lines = csv.split('\n').filter(line => line.trim());
                
                processBulkData(lines);
            };
            reader.readAsText(file);
        }
        
        function processBulkManual() {
            const bulkText = document.getElementById('bulkGuestList').value.trim();
            
            if (!bulkText) {
                showNotification('Mohon masukkan daftar tamu!', 'error');
                return;
            }
            
            const lines = bulkText.split('\n').filter(line => line.trim());
            processBulkData(lines);
        }
        
        function processBulkData(lines) {
            const results = {
                success: [],
                errors: []
            };
            
            lines.forEach((line, index) => {
                try {
                    const parts = line.split(',').map(part => part.trim());
                    
                    if (parts.length < 2) {
                        results.errors.push(`Baris ${index + 1}: Format tidak valid (minimal nama dan jumlah)`);
                        return;
                    }
                    
                    const name = parts[0];
                    const count = parseInt(parts[1]) || 1;
                    const message = parts[2] || '';
                    
                    if (!name) {
                        results.errors.push(`Baris ${index + 1}: Nama tidak boleh kosong`);
                        return;
                    }
                    
                    // Check if guest already exists
                    const existingGuest = DB.guests.find(g => 
                        g.name.toLowerCase() === name.toLowerCase() && 
                        g.clientId === currentClientId
                    );
                    
                    if (existingGuest) {
                        results.errors.push(`Baris ${index + 1}: ${name} sudah check-in sebelumnya`);
                        return;
                    }
                    
                    const guest = {
                        name: name,
                        count: count,
                        message: message,
                        status: 'checked-in',
                        method: 'bulk',
                        clientId: currentClientId,
                        operatorName: currentUser
                    };
                    
                    DB.addGuest(guest);
                    results.success.push(`${name} (${count} orang)`);
                    
                } catch (error) {
                    results.errors.push(`Baris ${index + 1}: Error - ${error.message}`);
                }
            });
            
            // Play appropriate sound based on results
            if (results.success.length > 0 && results.errors.length === 0) {
                SoundEffects.playSuccess();
            } else if (results.errors.length > 0 && results.success.length === 0) {
                SoundEffects.playError();
            } else if (results.success.length > 0 && results.errors.length > 0) {
                SoundEffects.playNotification(); // Mixed results
            }
            
            // Show results
            showBulkResults(results);
            
            // Update stats and table
            updateStats();
            loadGuestTable();
            
            // Clear inputs
            document.getElementById('csvFile').value = '';
            document.getElementById('bulkGuestList').value = '';
            
            showNotification(`Bulk check-in selesai! ${results.success.length} berhasil, ${results.errors.length} error`, 
                results.errors.length > 0 ? 'error' : 'success');
        }
        
        function showBulkResults(results) {
            const resultsDiv = document.getElementById('bulkResults');
            const contentDiv = document.getElementById('bulkResultsContent');
            
            let html = '';
            
            if (results.success.length > 0) {
                html += `
                    <div class="mb-6">
                        <h5 class="text-green-400 font-semibold mb-3">✅ Berhasil Check-in (${results.success.length})</h5>
                        <div class="space-y-2">
                            ${results.success.map(guest => `
                                <div class="bg-green-500/20 border border-green-500/30 rounded-lg p-3">
                                    <p class="text-green-300 text-sm">${guest}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            if (results.errors.length > 0) {
                html += `
                    <div class="mb-6">
                        <h5 class="text-red-400 font-semibold mb-3">❌ Error (${results.errors.length})</h5>
                        <div class="space-y-2">
                            ${results.errors.map(error => `
                                <div class="bg-red-500/20 border border-red-500/30 rounded-lg p-3">
                                    <p class="text-red-300 text-sm">${error}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            contentDiv.innerHTML = html;
            resultsDiv.classList.remove('hidden');
        }
        
        function printQR() {
            const canvas = document.getElementById('qrCanvas');
            const dataURL = canvas.toDataURL();
            
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                    <head>
                        <title>QR Code - Wedding Check-in</title>
                        <style>
                            body { 
                                margin: 0; 
                                padding: 20px; 
                                text-align: center; 
                                font-family: Arial, sans-serif;
                            }
                            .qr-container {
                                border: 2px solid #333;
                                padding: 20px;
                                display: inline-block;
                                margin: 20px;
                            }
                            h1 { color: #333; margin-bottom: 10px; }
                            p { color: #666; margin: 10px 0; }
                            img { max-width: 300px; height: auto; }
                        </style>
                    </head>
                    <body>
                        <div class="qr-container">
                            <h1>Wedding Check-in</h1>
                            <p>Scan QR Code untuk Check-in</p>
                            <img src="${dataURL}" alt="QR Code">
                            <p><strong>${DB.settings.coupleNames}</strong></p>
                            <p>${new Date(DB.settings.weddingDate).toLocaleDateString('id-ID')}</p>
                        </div>
                    </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        // Theme Application Function
        function applyTheme(themeName) {
            const body = document.body;
            const dashboard = document.getElementById('dashboard');
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            // Remove existing theme classes
            body.classList.remove('theme-romantic', 'theme-elegant', 'theme-modern', 'theme-classic', 'theme-garden', 
                'theme-minimalist', 'theme-luxury', 'theme-neon', 'theme-vintage', 'theme-nature', 'theme-royal');
            
            // Apply new theme
            switch(themeName) {
                case 'romantic':
                    body.classList.add('theme-romantic');
                    updateThemeColors({
                        primary: '#ff69b4',
                        secondary: '#ffd700',
                        accent: '#ff1493',
                        background: 'linear-gradient(135deg, #ff69b4 0%, #ff1493 50%, #dc143c 100%)'
                    });
                    break;
                case 'elegant':
                    body.classList.add('theme-elegant');
                    updateThemeColors({
                        primary: '#1e3a8a',
                        secondary: '#c0c0c0',
                        accent: '#4f46e5',
                        background: 'linear-gradient(135deg, #1e3a8a 0%, #3730a3 50%, #312e81 100%)'
                    });
                    break;
                case 'modern':
                    body.classList.add('theme-modern');
                    updateThemeColors({
                        primary: '#8b5cf6',
                        secondary: '#06b6d4',
                        accent: '#a855f7',
                        background: 'linear-gradient(135deg, #8b5cf6 0%, #7c3aed 50%, #6d28d9 100%)'
                    });
                    break;
                case 'classic':
                    body.classList.add('theme-classic');
                    updateThemeColors({
                        primary: '#991b1b',
                        secondary: '#f5f5dc',
                        accent: '#dc2626',
                        background: 'linear-gradient(135deg, #991b1b 0%, #7f1d1d 50%, #450a0a 100%)'
                    });
                    break;
                case 'garden':
                    body.classList.add('theme-garden');
                    updateThemeColors({
                        primary: '#16a34a',
                        secondary: '#ffffff',
                        accent: '#22c55e',
                        background: 'linear-gradient(135deg, #16a34a 0%, #15803d 50%, #166534 100%)'
                    });
                    break;
                case 'minimalist':
                    body.classList.add('theme-minimalist');
                    applyMinimalistLayout();
                    updateThemeColors({
                        primary: '#000000',
                        secondary: '#ffffff',
                        accent: '#666666',
                        background: 'linear-gradient(135deg, #f8f9fa 0%, #e9ecef 50%, #dee2e6 100%)'
                    });
                    break;
                case 'luxury':
                    body.classList.add('theme-luxury');
                    applyLuxuryLayout();
                    updateThemeColors({
                        primary: '#d4af37',
                        secondary: '#ffd700',
                        accent: '#b8860b',
                        background: 'linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #000000 100%)'
                    });
                    break;
                case 'neon':
                    body.classList.add('theme-neon');
                    applyNeonLayout();
                    updateThemeColors({
                        primary: '#00ffff',
                        secondary: '#ff00ff',
                        accent: '#00ff00',
                        background: 'linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%)'
                    });
                    break;
                case 'vintage':
                    body.classList.add('theme-vintage');
                    applyVintageLayout();
                    updateThemeColors({
                        primary: '#8b4513',
                        secondary: '#daa520',
                        accent: '#cd853f',
                        background: 'linear-gradient(135deg, #f5e6d3 0%, #e8d5b7 50%, #d2b48c 100%)'
                    });
                    break;
                case 'nature':
                    body.classList.add('theme-nature');
                    applyNatureLayout();
                    updateThemeColors({
                        primary: '#228b22',
                        secondary: '#90ee90',
                        accent: '#32cd32',
                        background: 'linear-gradient(135deg, #98fb98 0%, #90ee90 50%, #7cfc00 100%)'
                    });
                    break;
                case 'royal':
                    body.classList.add('theme-royal');
                    applyRoyalLayout();
                    updateThemeColors({
                        primary: '#4b0082',
                        secondary: '#ffd700',
                        accent: '#9370db',
                        background: 'linear-gradient(135deg, #2e0854 0%, #4b0082 50%, #663399 100%)'
                    });
                    break;
                default:
                    // Default theme (current)
                    resetLayoutStyles();
                    break;
            }
        }
        
        function updateThemeColors(colors) {
            const style = document.createElement('style');
            style.id = 'dynamic-theme';
            
            // Remove existing dynamic theme
            const existingStyle = document.getElementById('dynamic-theme');
            if (existingStyle) {
                existingStyle.remove();
            }
            
            style.innerHTML = `
                .bg-gradient-wedding {
                    background: ${colors.background} !important;
                }
                
                .bg-gradient-gold {
                    background: linear-gradient(135deg, ${colors.secondary} 0%, ${colors.primary} 100%) !important;
                }
                
                .bg-gradient-premium {
                    background: linear-gradient(135deg, ${colors.primary} 0%, ${colors.accent} 100%) !important;
                }
                
                .btn-luxury {
                    background: linear-gradient(135deg, ${colors.secondary} 0%, ${colors.primary} 100%) !important;
                }
                
                .btn-premium {
                    background: linear-gradient(135deg, ${colors.primary} 0%, ${colors.accent} 100%) !important;
                }
                
                .text-gradient {
                    background: linear-gradient(135deg, ${colors.secondary} 0%, ${colors.primary} 50%, ${colors.accent} 100%) !important;
                    -webkit-background-clip: text !important;
                    -webkit-text-fill-color: transparent !important;
                    background-clip: text !important;
                }
                
                .text-gradient-purple {
                    background: linear-gradient(135deg, ${colors.primary} 0%, ${colors.accent} 100%) !important;
                    -webkit-background-clip: text !important;
                    -webkit-text-fill-color: transparent !important;
                    background-clip: text !important;
                }
                
                .glow {
                    box-shadow: 0 0 20px ${colors.secondary}80 !important;
                }
                
                .glow-purple {
                    box-shadow: 0 0 20px ${colors.primary}80 !important;
                }
                
                .checkin-tab.active {
                    background: linear-gradient(135deg, ${colors.secondary} 0%, ${colors.primary} 100%) !important;
                }
                
                .input-premium:focus {
                    border-color: ${colors.primary} !important;
                    box-shadow: 0 0 20px ${colors.primary}50 !important;
                }
                
                .table-premium th {
                    color: ${colors.secondary} !important;
                }
                
                .badge-premium {
                    background: linear-gradient(135deg, ${colors.secondary}30 0%, ${colors.secondary}20 100%) !important;
                    border: 1px solid ${colors.secondary}50 !important;
                    color: ${colors.secondary} !important;
                }
                
                .nav-item::before {
                    background: linear-gradient(135deg, ${colors.secondary} 0%, ${colors.primary} 100%) !important;
                }
                
                .nav-item:hover {
                    background: ${colors.secondary}20 !important;
                }
                
                ::-webkit-scrollbar-thumb {
                    background: linear-gradient(135deg, ${colors.secondary} 0%, ${colors.primary} 100%) !important;
                }
                
                .bg-wedding-photo {
                    background: ${colors.background} !important;
                }
            `;
            
            document.head.appendChild(style);
        }

        // Layout Functions for New Themes
        function applyMinimalistLayout() {
            const layoutStyle = document.createElement('style');
            layoutStyle.id = 'minimalist-layout';
            
            // Remove existing layout
            const existingLayout = document.getElementById('minimalist-layout');
            if (existingLayout) {
                existingLayout.remove();
            }
            
            layoutStyle.innerHTML = `
                .theme-minimalist .sidebar {
                    background: rgba(255, 255, 255, 0.95) !important;
                    border-right: 1px solid #e5e7eb !important;
                    box-shadow: none !important;
                }
                
                .theme-minimalist .premium-card {
                    background: #ffffff !important;
                    border: 1px solid #e5e7eb !important;
                    border-radius: 8px !important;
                    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
                }
                
                .theme-minimalist .glass,
                .theme-minimalist .glass-dark {
                    background: #ffffff !important;
                    border: 1px solid #e5e7eb !important;
                    backdrop-filter: none !important;
                }
                
                .theme-minimalist .nav-item {
                    border-radius: 4px !important;
                    margin: 2px 0 !important;
                }
                
                .theme-minimalist .btn-luxury,
                .theme-minimalist .btn-premium {
                    border-radius: 4px !important;
                    font-weight: 500 !important;
                    text-transform: none !important;
                }
                
                .theme-minimalist .floating {
                    animation: none !important;
                }
                
                .theme-minimalist body {
                    background: #f9fafb !important;
                }
            `;
            
            document.head.appendChild(layoutStyle);
        }
        
        function applyLuxuryLayout() {
            const layoutStyle = document.createElement('style');
            layoutStyle.id = 'luxury-layout';
            
            const existingLayout = document.getElementById('luxury-layout');
            if (existingLayout) {
                existingLayout.remove();
            }
            
            layoutStyle.innerHTML = `
                .theme-luxury .sidebar {
                    background: linear-gradient(180deg, #1a1a1a 0%, #2d2d2d 100%) !important;
                    border-right: 2px solid #d4af37 !important;
                    box-shadow: 0 0 30px rgba(212, 175, 55, 0.3) !important;
                }
                
                .theme-luxury .premium-card {
                    background: linear-gradient(145deg, #2d2d2d 0%, #1a1a1a 100%) !important;
                    border: 2px solid #d4af37 !important;
                    border-radius: 20px !important;
                    box-shadow: 0 10px 40px rgba(212, 175, 55, 0.2) !important;
                    position: relative !important;
                    overflow: hidden !important;
                }
                
                .theme-luxury .premium-card::before {
                    content: '' !important;
                    position: absolute !important;
                    top: 0 !important;
                    left: 0 !important;
                    right: 0 !important;
                    height: 2px !important;
                    background: linear-gradient(90deg, transparent, #ffd700, transparent) !important;
                    animation: luxuryShine 3s infinite !important;
                }
                
                @keyframes luxuryShine {
                    0%, 100% { transform: translateX(-100%); }
                    50% { transform: translateX(100%); }
                }
                
                .theme-luxury .glass,
                .theme-luxury .glass-dark {
                    background: rgba(45, 45, 45, 0.9) !important;
                    border: 1px solid #d4af37 !important;
                    backdrop-filter: blur(20px) !important;
                }
                
                .theme-luxury .nav-item {
                    border-left: 3px solid transparent !important;
                    transition: all 0.3s ease !important;
                }
                
                .theme-luxury .nav-item:hover {
                    border-left-color: #ffd700 !important;
                    background: rgba(212, 175, 55, 0.1) !important;
                    transform: translateX(10px) !important;
                }
                
                .theme-luxury body {
                    background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #2d2d2d 100%) !important;
                }
                
                .theme-luxury .text-white,
                .theme-luxury .text-slate-800,
                .theme-luxury .text-slate-700 {
                    color: #ffd700 !important;
                }
            `;
            
            document.head.appendChild(layoutStyle);
        }
        
        function applyNeonLayout() {
            const layoutStyle = document.createElement('style');
            layoutStyle.id = 'neon-layout';
            
            const existingLayout = document.getElementById('neon-layout');
            if (existingLayout) {
                existingLayout.remove();
            }
            
            layoutStyle.innerHTML = `
                .theme-neon .sidebar {
                    background: rgba(10, 10, 10, 0.95) !important;
                    border-right: 2px solid #00ffff !important;
                    box-shadow: 0 0 20px #00ffff, inset 0 0 20px rgba(0, 255, 255, 0.1) !important;
                }
                
                .theme-neon .premium-card {
                    background: rgba(26, 26, 46, 0.9) !important;
                    border: 1px solid #00ffff !important;
                    border-radius: 15px !important;
                    box-shadow: 
                        0 0 20px rgba(0, 255, 255, 0.3),
                        inset 0 0 20px rgba(0, 255, 255, 0.05) !important;
                    position: relative !important;
                }
                
                .theme-neon .premium-card::after {
                    content: '' !important;
                    position: absolute !important;
                    top: -2px !important;
                    left: -2px !important;
                    right: -2px !important;
                    bottom: -2px !important;
                    background: linear-gradient(45deg, #00ffff, #ff00ff, #00ff00, #00ffff) !important;
                    border-radius: 15px !important;
                    z-index: -1 !important;
                    animation: neonRotate 4s linear infinite !important;
                }
                
                @keyframes neonRotate {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                
                .theme-neon .glass,
                .theme-neon .glass-dark {
                    background: rgba(26, 26, 46, 0.8) !important;
                    border: 1px solid #00ffff !important;
                    backdrop-filter: blur(15px) !important;
                    box-shadow: 0 0 15px rgba(0, 255, 255, 0.3) !important;
                }
                
                .theme-neon .nav-item {
                    border-radius: 10px !important;
                    transition: all 0.3s ease !important;
                }
                
                .theme-neon .nav-item:hover {
                    background: rgba(0, 255, 255, 0.1) !important;
                    box-shadow: 0 0 15px rgba(0, 255, 255, 0.5) !important;
                    text-shadow: 0 0 10px #00ffff !important;
                }
                
                .theme-neon body {
                    background: radial-gradient(circle at 20% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%),
                                radial-gradient(circle at 80% 20%, rgba(255, 0, 255, 0.1) 0%, transparent 50%),
                                linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%) !important;
                }
                
                .theme-neon .text-white,
                .theme-neon .text-slate-800,
                .theme-neon .text-slate-700 {
                    color: #00ffff !important;
                    text-shadow: 0 0 5px #00ffff !important;
                }
            `;
            
            document.head.appendChild(layoutStyle);
        }
        
        function applyVintageLayout() {
            const layoutStyle = document.createElement('style');
            layoutStyle.id = 'vintage-layout';
            
            const existingLayout = document.getElementById('vintage-layout');
            if (existingLayout) {
                existingLayout.remove();
            }
            
            layoutStyle.innerHTML = `
                .theme-vintage .sidebar {
                    background: linear-gradient(180deg, #f5e6d3 0%, #e8d5b7 100%) !important;
                    border-right: 3px solid #8b4513 !important;
                    box-shadow: inset -5px 0 10px rgba(139, 69, 19, 0.2) !important;
                }
                
                .theme-vintage .premium-card {
                    background: linear-gradient(145deg, #f5e6d3 0%, #e8d5b7 100%) !important;
                    border: 2px solid #8b4513 !important;
                    border-radius: 25px !important;
                    box-shadow: 
                        0 8px 25px rgba(139, 69, 19, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.5) !important;
                    position: relative !important;
                }
                
                .theme-vintage .premium-card::before {
                    content: '' !important;
                    position: absolute !important;
                    top: 10px !important;
                    left: 10px !important;
                    right: 10px !important;
                    bottom: 10px !important;
                    border: 1px solid #daa520 !important;
                    border-radius: 20px !important;
                    pointer-events: none !important;
                }
                
                .theme-vintage .glass,
                .theme-vintage .glass-dark {
                    background: rgba(245, 230, 211, 0.9) !important;
                    border: 2px solid #8b4513 !important;
                    backdrop-filter: sepia(20%) !important;
                }
                
                .theme-vintage .nav-item {
                    border-radius: 15px !important;
                    margin: 5px 0 !important;
                    font-family: 'Georgia', serif !important;
                }
                
                .theme-vintage .nav-item:hover {
                    background: rgba(139, 69, 19, 0.1) !important;
                    box-shadow: inset 0 2px 5px rgba(139, 69, 19, 0.2) !important;
                }
                
                .theme-vintage body {
                    background: 
                        radial-gradient(circle at 25% 25%, rgba(218, 165, 32, 0.1) 0%, transparent 50%),
                        linear-gradient(135deg, #f5e6d3 0%, #e8d5b7 50%, #d2b48c 100%) !important;
                    font-family: 'Georgia', serif !important;
                }
                
                .theme-vintage .font-playfair {
                    font-family: 'Georgia', serif !important;
                }
            `;
            
            document.head.appendChild(layoutStyle);
        }
        
        function applyNatureLayout() {
            const layoutStyle = document.createElement('style');
            layoutStyle.id = 'nature-layout';
            
            const existingLayout = document.getElementById('nature-layout');
            if (existingLayout) {
                existingLayout.remove();
            }
            
            layoutStyle.innerHTML = `
                .theme-nature .sidebar {
                    background: linear-gradient(180deg, rgba(152, 251, 152, 0.95) 0%, rgba(144, 238, 144, 0.95) 100%) !important;
                    border-right: 3px solid #228b22 !important;
                    box-shadow: 0 0 20px rgba(34, 139, 34, 0.3) !important;
                }
                
                .theme-nature .premium-card {
                    background: linear-gradient(145deg, rgba(240, 255, 240, 0.95) 0%, rgba(152, 251, 152, 0.9) 100%) !important;
                    border: 2px solid #228b22 !important;
                    border-radius: 30px !important;
                    box-shadow: 0 10px 30px rgba(34, 139, 34, 0.2) !important;
                    position: relative !important;
                    overflow: hidden !important;
                }
                
                .theme-nature .premium-card::before {
                    content: '🌿' !important;
                    position: absolute !important;
                    top: 10px !important;
                    right: 15px !important;
                    font-size: 20px !important;
                    opacity: 0.3 !important;
                }
                
                .theme-nature .glass,
                .theme-nature .glass-dark {
                    background: rgba(240, 255, 240, 0.9) !important;
                    border: 1px solid #90ee90 !important;
                    backdrop-filter: blur(10px) !important;
                }
                
                .theme-nature .nav-item {
                    border-radius: 20px !important;
                    margin: 3px 0 !important;
                }
                
                .theme-nature .nav-item:hover {
                    background: rgba(34, 139, 34, 0.1) !important;
                    transform: translateX(8px) scale(1.02) !important;
                }
                
                .theme-nature body {
                    background: 
                        radial-gradient(circle at 30% 70%, rgba(50, 205, 50, 0.2) 0%, transparent 50%),
                        radial-gradient(circle at 70% 30%, rgba(144, 238, 144, 0.2) 0%, transparent 50%),
                        linear-gradient(135deg, #98fb98 0%, #90ee90 50%, #7cfc00 100%) !important;
                }
                
                .theme-nature .floating {
                    animation: natureFloat 4s ease-in-out infinite !important;
                }
                
                @keyframes natureFloat {
                    0%, 100% { transform: translateY(0px) rotate(0deg); }
                    25% { transform: translateY(-8px) rotate(1deg); }
                    75% { transform: translateY(-12px) rotate(-1deg); }
                }
            `;
            
            document.head.appendChild(layoutStyle);
        }
        
        function applyRoyalLayout() {
            const layoutStyle = document.createElement('style');
            layoutStyle.id = 'royal-layout';
            
            const existingLayout = document.getElementById('royal-layout');
            if (existingLayout) {
                existingLayout.remove();
            }
            
            layoutStyle.innerHTML = `
                .theme-royal .sidebar {
                    background: linear-gradient(180deg, rgba(46, 8, 84, 0.95) 0%, rgba(75, 0, 130, 0.95) 100%) !important;
                    border-right: 3px solid #ffd700 !important;
                    box-shadow: 0 0 30px rgba(255, 215, 0, 0.4) !important;
                }
                
                .theme-royal .premium-card {
                    background: linear-gradient(145deg, rgba(75, 0, 130, 0.9) 0%, rgba(46, 8, 84, 0.9) 100%) !important;
                    border: 3px solid #ffd700 !important;
                    border-radius: 25px !important;
                    box-shadow: 
                        0 15px 40px rgba(255, 215, 0, 0.3),
                        inset 0 1px 0 rgba(255, 215, 0, 0.2) !important;
                    position: relative !important;
                }
                
                .theme-royal .premium-card::before {
                    content: '👑' !important;
                    position: absolute !important;
                    top: -10px !important;
                    right: 15px !important;
                    font-size: 24px !important;
                    z-index: 10 !important;
                }
                
                .theme-royal .premium-card::after {
                    content: '' !important;
                    position: absolute !important;
                    top: 0 !important;
                    left: 0 !important;
                    right: 0 !important;
                    bottom: 0 !important;
                    background: 
                        radial-gradient(circle at 20% 20%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(147, 112, 219, 0.1) 0%, transparent 50%) !important;
                    border-radius: 22px !important;
                    pointer-events: none !important;
                }
                
                .theme-royal .glass,
                .theme-royal .glass-dark {
                    background: rgba(75, 0, 130, 0.8) !important;
                    border: 2px solid #ffd700 !important;
                    backdrop-filter: blur(15px) !important;
                }
                
                .theme-royal .nav-item {
                    border-radius: 12px !important;
                    margin: 4px 0 !important;
                    border-left: 4px solid transparent !important;
                    transition: all 0.4s ease !important;
                }
                
                .theme-royal .nav-item:hover {
                    background: rgba(255, 215, 0, 0.15) !important;
                    border-left-color: #ffd700 !important;
                    transform: translateX(12px) !important;
                    box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3) !important;
                }
                
                .theme-royal body {
                    background: 
                        radial-gradient(circle at 25% 75%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 75% 25%, rgba(147, 112, 219, 0.1) 0%, transparent 50%),
                        linear-gradient(135deg, #2e0854 0%, #4b0082 50%, #663399 100%) !important;
                }
                
                .theme-royal .text-white,
                .theme-royal .text-slate-800,
                .theme-royal .text-slate-700 {
                    color: #ffd700 !important;
                    text-shadow: 0 0 5px rgba(255, 215, 0, 0.5) !important;
                }
                
                .theme-royal .floating {
                    animation: royalFloat 5s ease-in-out infinite !important;
                }
                
                @keyframes royalFloat {
                    0%, 100% { transform: translateY(0px) scale(1); }
                    33% { transform: translateY(-15px) scale(1.05); }
                    66% { transform: translateY(-8px) scale(0.98); }
                }
            `;
            
            document.head.appendChild(layoutStyle);
        }
        
        function resetLayoutStyles() {
            // Remove all layout styles
            const layoutIds = ['minimalist-layout', 'luxury-layout', 'neon-layout', 'vintage-layout', 'nature-layout', 'royal-layout'];
            layoutIds.forEach(id => {
                const style = document.getElementById(id);
                if (style) {
                    style.remove();
                }
            });
        }

        // Theme Application Functions
        function applySelectedTheme() {
            const selectedTheme = document.getElementById('themeSelect').value;
            
            if (selectedTheme === 'default') {
                // Reset to default theme
                resetToDefaultTheme();
                showNotification('Tema default berhasil diterapkan!', 'success');
                return;
            }
            
            // Apply selected theme
            applyTheme(selectedTheme);
            
            // Save theme to current client or settings
            if (currentRole === 'operator' && currentClient) {
                currentClient.theme = selectedTheme;
                DB.saveClients();
            } else if (currentRole === 'admin') {
                DB.settings.currentTheme = selectedTheme;
                DB.saveSettings();
            }
            
            showNotification(`Tema ${getThemeName(selectedTheme)} berhasil diterapkan!`, 'success');
        }
        
        function resetToDefaultTheme() {
            const body = document.body;
            
            // Remove all theme classes
            body.classList.remove('theme-romantic', 'theme-elegant', 'theme-modern', 'theme-classic', 'theme-garden', 
                'theme-minimalist', 'theme-luxury', 'theme-neon', 'theme-vintage', 'theme-nature', 'theme-royal');
            
            // Remove dynamic theme styles
            const existingStyle = document.getElementById('dynamic-theme');
            if (existingStyle) {
                existingStyle.remove();
            }
            
            // Reset layout styles
            resetLayoutStyles();
            
            // Reset theme select to default
            document.getElementById('themeSelect').value = 'default';
            
            // Save default theme
            if (currentRole === 'operator' && currentClient) {
                currentClient.theme = 'default';
                DB.saveClients();
            } else if (currentRole === 'admin') {
                DB.settings.currentTheme = 'default';
                DB.saveSettings();
            }
        }
        
        function loadCurrentTheme() {
            let currentTheme = 'default';
            
            if (currentRole === 'operator' && currentClient) {
                currentTheme = currentClient.theme || 'default';
            } else if (currentRole === 'admin') {
                currentTheme = DB.settings.currentTheme || 'default';
            }
            
            // Set theme select value
            const themeSelect = document.getElementById('themeSelect');
            if (themeSelect) {
                themeSelect.value = currentTheme;
            }
            
            // Apply theme if not default
            if (currentTheme !== 'default') {
                applyTheme(currentTheme);
            }
        }

        // Initialize QR code on load
        setTimeout(() => {
            generateQR();
        }, 1000);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98f7759ba005c26b',t:'MTc2MDYxNjY5My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
